{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?0f16","webpack:///./src/components/Notifications.vue?2fb2","webpack:///./src/utils/DateUtils.js","webpack:///./src/utils/ModelUtils.js","webpack:///./src/utils/StringUtils.js","webpack:///./src/utils/XMLUtils.js","webpack:///./src/App.vue?0b77","webpack:///./src/components/Notifications.vue?f0e3","webpack:///./src/components/Snackbars.vue?21fe","webpack:///src/components/Snackbars.vue","webpack:///./src/components/Snackbars.vue?cccd","webpack:///./src/components/Snackbars.vue","webpack:///src/components/Notifications.vue","webpack:///./src/components/Notifications.vue?55fb","webpack:///./src/components/Notifications.vue?518b","webpack:///./src/utils/Messages.js","webpack:///./src/utils/Model.js","webpack:///./src/utils/ModelLoaderUtils.js","webpack:///./src/store/modules/gedcom.js","webpack:///./src/services/LocalStorage.js","webpack:///./src/store/modules/prefs.js","webpack:///./src/store/modules/notifications.js","webpack:///./src/store/index.js","webpack:///src/App.vue","webpack:///./src/App.vue?3359","webpack:///./src/App.vue?2667","webpack:///./src/views/Overview.vue?a775","webpack:///src/views/Overview.vue","webpack:///./src/views/Overview.vue?7db1","webpack:///./src/views/Overview.vue?aead","webpack:///./src/views/NotFound.vue?bd27","webpack:///src/views/NotFound.vue","webpack:///./src/views/NotFound.vue?01c3","webpack:///./src/views/NotFound.vue","webpack:///./src/views/NetworkIssue.vue?482a","webpack:///./src/views/NetworkIssue.vue","webpack:///./src/router/index.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/utils/IncludeExclude.js","webpack:///./src/services/ExternalInterface.js","webpack:///./src/views/Overview.vue?1d60","webpack:///./src/utils/WeRelateUtils.js","webpack:///./src/services/ServerHelper.js","webpack:///./src/services/Server.js","webpack:///./src/components sync nonrecursive Base[A-Z]\\w+\\.(vue|js)$"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","MONTHS","january","february","march","april","may","june","july","august","september","october","november","december","jan","feb","mar","apr","jun","jul","aug","sep","oct","nov","dec","febr","sept","getAlphaMonth","mon","toLowerCase","isYear","y","isDay","isNumMonth","pAlphaNumRegExp","RegExp","getDateSortKey","date","year","month","day","fields","matchAll","field","num","toString","NS_SOURCE","NS_PLACE","NS_PERSON","NS_FAMILY","NS_MYSOURCE","NAMESPACES","104","106","108","110","112","OVERVIEW","PEOPLE","FAMILIES","WARNINGS","PLACES","SOURCES","MATCHES","UPDATES","IMPORT","HELPPAGES","NOT_MATCHABLE_PAGE","STATUS_DELETE","STATUS_PHASE2","STATUS_PHASE3","STATUS_IMPORTING","STATUS_ADMIN_REVIEW","STATUS_HOLD","NOT_CONNECTED","MAX_PEOPLE","NOMATCH","NAME_MATCH_THRESHOLD","cloneShallow","obj","assign","getPrototypeOf","getDefaultComponent","getDataComponent","model","id","personMap","component","familyMap","sourceMap","placeMap","getPrefixedTitle","title","indexOf","getUnprefixedTitle","prefixedTitle","values","nsText","startsWith","substr","getPersonFamilyName","getPersonFullName","getFamilyFullName","getReferences","references","pf","ef","getPrebarTitle","sc","getGedcomPageTitle","getGedcomPersonTitle","getGedcomFamilyTitle","getGedcomSourceTitle","preparePageData","findAdd","clone","lodash","cloneDeep","node","updateFamilyRef","updatePersonRef","updateEventFact","updateSourceCitation","deleteExcluded","getWarningPersonFamily","warn","getWarningLevelDesc","level","getEventFact","typ","find","itemUpdated","addUpdateMatch","removeMatch","addUpdateWarnings","removeWarnings","setRead","read","setWarningRead","setMatchRead","setUpdateRead","setMatchHelperFields","updateData","text","createModelObjectFromContent","copyData","setStdPersonAttrs","setStdFamilyAttrs","setStdMySourceAttrs","content","endTag","endPos","root","parseXML","xmlToJson","trim","person","family","getFullName","mysource","getMySourceName","userName","cleanWikiTitle","source","getPersonTitle","husband","wife","getFamilyTitle","standardizePlace","placeText","place","placeTextMap","std","ref","citation","list","cleanName","replace","capitalize","fullTitle","pos","escapeXML","slashRegExp","colonRegExp","spaceRegExp","hashRegExp","encodeWikiURIComponent","url","encodeURIComponent","split","map","word","charAt","toUpperCase","join","objectToQuery","keys","k","similarity","a","b","maxLen","Math","max","dziemba_levenshtein","tmp","res","alen","blen","row","Array","min","parser","DOMParser","parseFromString","documentElement","xml","nodeType","nodeName","attributes","attribute","item","nodeValue","hasChildNodes","childNodes","toXMLString","attrs","children","getChildElementsWithTag","elm","tagName","getElementText","_vm","this","_h","$createElement","_c","_self","$vuetify","breakpoint","mdAndDown","_l","link","_v","_s","icon","staticClass","style","minHeight","maxHeight","height","$route","fullPath","flexGrow","staticRenderFns","notifications","notificationsList","on","notificationsRemove","snackbar","idx","_b","class","identifier","color","scopedSlots","_u","fn","_t","$event","removeMessage","proxy","callback","$$v","$set","expression","$attrs","topOrBottom","distance","props","messages","default","idKey","String","textKey","colorKey","Number","len","snackbars","Date","now","random","components","render","$slots","watch","setSnackbars","methods","filter","forEach","show","$emit","created","top","VBtn","VSnackbar","Snackbars","computed","MESSAGES","internalDuplicates","notReady","notReadyWarnings","notReadyFamilies","notImportable","probablyNotImportable","phase2","phase3","adminReviewAdmin","adminReview","warningsAboveLowerThreshold","warningsAboveUpperThreshold","nextsteps","returntowerelate","removegedcom","onhold","statuswaiting","statusanalyzing","statusdelete","statusphase2","statusphase3","statushold","statuszero","statusother","notsignedin","notauthorized","gedcomnotfound","gedcomhold","unexpectederror","Model","gedcomId","status","importInstructions","nextSteps","isOwner","isAdmin","isUpdatable","isReturnable","isHoldable","isImportable","isMatchable","isMergeable","primaryPerson","peopleToImport","peopleExcluded","peopleMatched","familiesToImport","familiesExcluded","familiesMatched","warningsRead","warningsUnread","warningLevel","warningComment","duplicateCount","duplicateComment","sourcesToImport","sourcesMatched","sourcesExcluded","sourcesCitationOnly","totalNonExcludedSources","placesMatched","placesUnmatched","matchesMatched","matchesUnmatched","matchesUndecided","updatesMade","updatesNotMade","people","families","sources","places","warnings","matches","updates","findIndex","it","getItemIndex","readWarnings","warns","x","includes","isNaN","addUpdate","prefix","remove","ALLOWED_WARNINGS","WARNING_LOWER_THRESHOLD","WARNING_UPPER_THRESHOLD","loadGedcom","prefsGetReadItems","readPlaces","readSources","page","createModelObject","addPerson","addFamily","addSource","setPrimary","addPlace","loadGedcomData","setStatus","dataComponent","match","getTrueFalse","modelLoaded","updateRootDistances","loadWarningsMatchesUpdates","updateCounts","visitUserTalk","textContent","warningCount","dupCount","updateFlags","isBelowLowerThreshold","isBelowUpperThreshold","readMatches","readUpdates","addUpdateUpdate","primary","tf","state","mutations","GEDCOM_UPDATE_MODEL","actions","gedcomRead","commit","dispatch","rootGetters","readGedcom","log","alert","loadParentContent","WR_SERVER","gedcomReadData","readGedcomData","gedcomSetExclude","exclude","setExclude","gedcomUpdateStatus","warning","updateStatus","gedcomPageUpdated","pageUpdated","gedcomMatchFound","matchFound","gedcomMatchesFound","matchesString","merged","matchesFound","gedcomUnmatch","unmatch","gedcomUpdateData","getItem","localStorage","setItem","prefs","readFlags","noShowTips","PREFS_UPDATE","prefsRead","JSON","parse","LocalStorage","secondsSinceEpoch","round","getTime","expirationPeriod","cutoffTime","nowShowTips","stringify","prefsMarkRead","itemChanged","getItemKey","getters","readItems","searchKey","nextId","NOTIFICATIONS_PUSH","notification","NOTIFICATIONS_DELETE","notificationsAdd","Vue","use","Vuex","Store","gedcom","Multipane","MultipaneResizer","Notifications","store","mounted","review","loadGedcomId","bottomHeight","VApp","VContainer","VIcon","VList","VListItem","VListItemAction","VListItemContent","VListItemTitle","VMain","VNavigationDrawer","VRow","returnToWeRelate","_g","dialog","removeGedcom","_f","primaryPersonFullName","primaryPersonBirthDate","primaryPersonDeathDate","$store","VCard","VCardActions","VCardText","VCardTitle","VCol","VDialog","VSpacer","resource","required","VueRouter","routes","path","Overview","meta","requiresAuth","NotFound","NetworkIssue","redirect","params","router","beforeEach","routeTo","routeFrom","next","NProgress","start","afterEach","done","Vuetify","theme","themes","light","colors","cyan","darken2","secondary","lighten4","accent","orange","darken3","Vuelidate","VueColumnsResizableVuetify","config","productionTip","requireComponent","require","fileName","componentConfig","componentName","size","toFixed","pct","vuetify","h","App","$mount","updateRelatedDistanceInclude","includeItem","includedItems","sourceId","getMinDistance","includeRelatedFamilies","excludeItem","excludedItems","found","excludeRelatedFamilies","getRefDistance","getPersonFamilyData","dist","relRef","updateRelatedDistanceIncludeRelative","relative","isExcluded","countIncludedFamilyMembers","includedMembers","testIncludeFamily","testExcludeFamily","loadContent","getElementById","location","loadContentNewWindow","open","RESULT_NOMATCH","RESULT_MATCH","RESULT_MERGE","sentData","loadPageTitle","fetchItem","fetchGedcomItem","fetchWeRelateItem","findAddItem","mergeItem","compareItem","pageTitle","parms","newWindow","readGedcomPageData","oldMySources","getMySourceCitationIds","deathDate","deathPlace","burialDate","burialPlace","isNonLiving","setLiving","newMySources","updateMySourceInclusion","updateGedcomStatus","setMatch","datas","titles","success","setMatches","matchRelatedMatches","addRelatedMatches","fetchMatchedItem","updatedItems","saveKeys","saveExclude","member","matchedFamilies","matchedTitles","setPotentialMatches","familyMatches","getFamilyMatch","startMatching","save","handleRelatedMatches","matchIds","mergeIds","toBeMerged","prefixedTitles","mergedTF","matchDiffers","mergeDiffers","saveMerged","saveMatches","saveFlag","attr","updateGedcomFlag","ids","getPositiveNegative","saveLiving","living","familyIsLiving","spouseRef","spouse","mergedIds","saveMatchesToServer","matchRelatedFamilies","savePotentialMatches","matchFamily","matchData","prepareFindAddData","saveMatchedFamily","matchedFamilyTitles","matchedPF","unmatchedPF","matchedPFTitles","unmatchedPFTitles","pop","contains","ms","trimPlace","getPlaceNameLocatedIn","locatedIn","findAddData","sendPageData","pagetitle","gedcomtab","gedcomkey","namespace","st","pn","li","formAction","maxpages","m_0","m_1","addMerge","numChildren","maxchildren","lhs","rhs","compareData","compare","loadPageData","matchResult","gedcomid","editable","threshold","matchTitles","matchingFamily","compareFamilies","familyId","selfId","isSpouse","matched","bestScore","bestTitle","score","compareFamily","matchingTitle","pattern","exec","matchingHusbandName","husbandName","compareNames","matchingWifeName","wifeName","name1","name2","namePieces1","namePieces2","namePiece1","namePiece2","axiosClient","axios","baseURL","process","withCredentials","headers","Accept","sendAjaxService","functionName","method","sendParams","action","rs","rsargs","FormData","append","getBaseURL","axiosRetry","retries","gedcom_id","isArray","potentialMatches","gedcomStatus","webpackEmptyContext","req"],"mappings":"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","file":"js/app.ae212fb3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"fc9c4c60\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"about\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"8499efbf\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/gedcom-review/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notifications.vue?vue&type=style&index=0&id=500354fe&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notifications.vue?vue&type=style&index=0&id=500354fe&scoped=true&lang=css&\"","const MONTHS = {\n  january: 1,\n  february: 2,\n  march: 3,\n  april: 4,\n  may: 5,\n  june: 6,\n  july: 7,\n  august: 8,\n  september: 9,\n  october: 10,\n  november: 11,\n  december: 12,\n  jan: 1,\n  feb: 2,\n  mar: 3,\n  apr: 4,\n  jun: 6,\n  jul: 7,\n  aug: 8,\n  sep: 9,\n  oct: 10,\n  nov: 11,\n  dec: 12,\n  febr: 2,\n  sept: 9\n};\n\nfunction getAlphaMonth(mon) {\n  mon = mon.toLowerCase();\n  return MONTHS[mon] || 0;\n}\n\nfunction isYear(y) {\n  return y >= 1000 && y < 2200;\n}\n\nfunction isDay(d) {\n  return d >= 1 && d <= 31;\n}\n\nfunction isNumMonth(m) {\n  return m >= 1 && m <= 12;\n}\n\nconst pAlphaNumRegExp = new RegExp(\"\\\\d+|[^0-9\\\\s~!@#$%^&*()_+\\\\-={}|:'<>?;,./\\\"\\\\[\\\\]\\\\\\\\]+\", \"g\");\n\nexport function getDateSortKey(date) {\n  let result = \"\";\n  if (!date) {\n    return result;\n  }\n  let year = 0;\n  let month = 0;\n  let day = 0;\n  let fields = [...date.matchAll(pAlphaNumRegExp)];\n\n  for (let i = 0; i < fields.length; i++) {\n    let field = fields[i][0];\n    let num = +field;\n    if (isYear(num)) {\n      if (year === 0) {\n        year = num;\n      }\n    } else if (getAlphaMonth(field) > 0) {\n      if (month === 0) {\n        month = getAlphaMonth(field);\n      }\n    } else if (\n      isDay(num) &&\n      (!isNumMonth(num) ||\n        (i > 0 && getAlphaMonth(fields[i - 1][0]) > 0) ||\n        (i < fields.length - 1 && getAlphaMonth(fields[i + 1][0]) > 0))\n    ) {\n      if (day === 0) {\n        day = num;\n      }\n    } else if (i > 0 && isYear(+fields[i - 1])) {\n      // ignore -- probably 1963/4\n    } else if (isNumMonth(num)) {\n      if (month === 0) {\n        month = num;\n      }\n    }\n  }\n\n  if (year > 0) {\n    result = year.toString();\n    if (month > 0) {\n      result += month < 10 ? \"0\" + month.toString() : month.toString();\n      if (day > 0) {\n        result += day < 10 ? \"0\" + day.toString() : day.toString();\n      }\n    }\n  }\n\n  return result;\n}\n","import lodash from \"lodash\";\nimport { getDateSortKey } from \"@/utils/DateUtils\";\nimport { parseXML, xmlToJson } from \"@/utils/XMLUtils\";\nimport { capitalize } from \"@/utils/StringUtils\";\n\nexport const NS_SOURCE = 104;\nexport const NS_PLACE = 106;\nexport const NS_PERSON = 108;\nexport const NS_FAMILY = 110;\nexport const NS_MYSOURCE = 112;\n\nexport const NAMESPACES = {\n  104: \"Source\",\n  106: \"Place\",\n  108: \"Person\",\n  110: \"Family\",\n  112: \"MySource\"\n};\n\nexport const OVERVIEW = 1;\nexport const PEOPLE = 2;\nexport const FAMILIES = 3;\nexport const WARNINGS = 4;\nexport const PLACES = 5;\nexport const SOURCES = 6;\nexport const MATCHES = 7;\nexport const UPDATES = 8;\nexport const IMPORT = 9;\n\nexport const HELPPAGES = [\n  \"Help:Review_GEDCOM\",\n  \"Help:Review_GEDCOM#Overview_Tab\",\n  \"Help:Review_GEDCOM#People_Tab\",\n  \"Help:Review_GEDCOM#Families_Tab\",\n  \"Help:Review_GEDCOM#Warnings_Tab\",\n  \"Help:Review_GEDCOM#Places_Tab\",\n  \"Help:Review_GEDCOM#Sources_Tab\",\n  \"Help:Review_GEDCOM#Family_Matches_Tab\",\n  \"Help:Review_GEDCOM#Updates_Tab\",\n  \"Help:Review_GEDCOM#Import_Tab\"\n];\n\nexport const NOT_MATCHABLE_PAGE = \"Help:Review_GEDCOM/Not_Matchable\";\n\nexport const STATUS_DELETE = 0;\nexport const STATUS_WAITING = 1;\nexport const STATUS_ANALYZING = 2;\nexport const STATUS_READY = 3;\nexport const STATUS_OPENED = 4;\nexport const STATUS_PHASE2 = 5;\nexport const STATUS_PHASE3 = 6;\nexport const STATUS_IMPORTING = 7;\nexport const STATUS_ADMIN_REVIEW = 8;\nexport const STATUS_HOLD = 19;\n\nexport const NOT_CONNECTED = 9999;\n\nexport const MAX_PEOPLE = 5100;\n\nexport const NOMATCH = \"#nomatch#\";\n\nexport const NAME_MATCH_THRESHOLD = 60;\n\nexport function cloneShallow(obj) {\n  return Object.assign(Object.create(Object.getPrototypeOf(obj)), obj);\n}\n\nexport function getDefaultComponent(ns) {\n  if (ns === NS_FAMILY) return FAMILIES;\n  if (ns === NS_PERSON) return PEOPLE;\n  if (ns === NS_MYSOURCE) return SOURCES;\n  if (ns === NS_PLACE) return PLACES;\n  return 0;\n}\n\nexport function getDataComponent(model, id) {\n  let data = model.personMap[id];\n  if (data) {\n    return { data, component: PEOPLE };\n  }\n  data = model.familyMap[id];\n  if (data) {\n    return { data, component: FAMILIES };\n  }\n  data = model.sourceMap[id];\n  if (data) {\n    return { data, component: SOURCES };\n  }\n  data = model.placeMap[id];\n  if (data) {\n    return { data, component: PLACES };\n  }\n  return null;\n}\n\nexport function getPrefixedTitle(ns, title) {\n  if (title.indexOf(NAMESPACES[ns] + \":\") !== 0) {\n    return NAMESPACES[ns] + \":\" + title;\n  }\n  return title;\n}\n\nexport function getUnprefixedTitle(prefixedTitle) {\n  for (let nsText of Object.values(NAMESPACES)) {\n    if (prefixedTitle.startsWith(nsText + \":\")) {\n      return prefixedTitle.substr(nsText.length + 1);\n    }\n  }\n  return prefixedTitle;\n}\n\nexport function getPersonFamilyName(data) {\n  if (+data[\"@ns\"] === NS_PERSON) {\n    return getPersonFullName(data);\n  } else {\n    return getFamilyFullName(data);\n  }\n}\n\nexport function getReferences(model, data) {\n  let references = [];\n\n  for (let pf of model[\"people\"] || []) {\n    if (+data[\"@ns\"] === NS_PLACE) {\n      for (let ef of pf[\"event_fact\"] || []) {\n        if (getPrebarTitle(ef[\"@place\"]) === data[\"@text\"]) {\n          references.push(pf);\n          break;\n        }\n      }\n    } else if (+data[\"@ns\"] === NS_MYSOURCE) {\n      for (let sc of pf[\"source_citation\"] || []) {\n        if (sc[\"@source_id\"] === data[\"@id\"]) {\n          references.push(pf);\n          break;\n        }\n      }\n    }\n  }\n\n  for (let pf of model[\"families\"] || []) {\n    if (+data[\"@ns\"] === NS_PLACE) {\n      for (let ef of pf[\"event_fact\"] || []) {\n        if (getPrebarTitle(ef[\"@place\"]) === data[\"@text\"]) {\n          references.push(pf);\n          break;\n        }\n      }\n    } else if (+data[\"@ns\"] === NS_MYSOURCE) {\n      for (let sc of pf[\"source_citation\"] || []) {\n        if (sc[\"@source_id\"] === data[\"@id\"]) {\n          references.push(pf);\n          break;\n        }\n      }\n    }\n  }\n\n  return references;\n}\n\nexport function getGedcomPageTitle(model, data) {\n  if (+data[\"@ns\"] === NS_PERSON) {\n    return getGedcomPersonTitle(data);\n  } else if (+data[\"@ns\"] === NS_FAMILY) {\n    return getGedcomFamilyTitle(model, data);\n  } else if (+data[\"@ns\"] === NS_MYSOURCE) {\n    return getGedcomSourceTitle(model, data);\n  }\n  return \"\";\n}\n\nexport function preparePageData(model, data, findAdd = false) {\n  // convert titles (excluded, matched); handle living\n  // IMPORTANT of order to handle editing the page properly, loading a single page MUST use\n  // the GEDCOM title including the GEDCOM key for ref.@title attrs\n  let clone = lodash.cloneDeep(data);\n\n  // set the page title\n  clone[\"@title\"] = getPrefixedTitle(+data[\"@ns\"], getGedcomPageTitle(model, data));\n  clone[\"@merged\"] = data[\"@merged\"];\n\n  // update pf titles (living, excluded), place titles, source titles\n  for (let node of clone[\"child_of_family\"] || []) updateFamilyRef(model, node, findAdd);\n  for (let node of clone[\"spouse_of_family\"] || []) updateFamilyRef(model, node, findAdd);\n  for (let node of clone[\"husband\"] || []) updatePersonRef(model, node, findAdd);\n  for (let node of clone[\"wife\"] || []) updatePersonRef(model, node, findAdd);\n  for (let node of clone[\"child\"] || []) updatePersonRef(model, node, findAdd);\n  for (let node of clone[\"event_fact\"] || []) updateEventFact(model, node);\n  for (let node of clone[\"source_citation\"] || []) updateSourceCitation(model, node, findAdd);\n\n  if (findAdd) {\n    deleteExcluded(clone[\"child_of_family\"]);\n    deleteExcluded(clone[\"spouse_of_family\"]);\n    deleteExcluded(clone[\"husband\"]);\n    deleteExcluded(clone[\"wife\"]);\n    deleteExcluded(clone[\"child\"]);\n    deleteExcluded(clone[\"source_citation\"]);\n  }\n  return clone;\n}\n\nexport function getWarningPersonFamily(warn) {\n  return +warn[\"@ns\"] === NS_PERSON ? warn[\"person\"][0] : warn[\"family\"][0];\n}\n\nexport function getWarningLevelDesc(warn) {\n  let level = \"\";\n  if (warn[\"@warningLevel\"] === 0) {\n    level = \"alert\";\n  } else if (warn[\"@warningLevel\"] === 1) {\n    level = \"warning\";\n  } else if (warn[\"@warningLevel\"] === 2) {\n    level = \"error\";\n  } else if (warn[\"@warningLevel\"] === 3) {\n    level = \"duplicate\";\n  }\n  return level;\n}\n\nexport function getEventFact(obj, typ) {\n  if (!obj || !obj[\"event_fact\"]) {\n    return null;\n  }\n  return obj[\"event_fact\"].find(ef => ef[\"@type\"] === typ);\n}\n\nexport function itemUpdated(model, data) {\n  let ns = +data[\"@ns\"];\n  if (data[\"@warningLevel\"]) {\n    // model.warningsItemUpdated(data)\n  } else if (ns === NS_PERSON || ns === NS_FAMILY) {\n    if (ns === NS_PERSON) {\n      // model.peopleItemUpdated(data);\n    } else if (ns === NS_FAMILY) {\n      // model.familiesItemUpdated(data);\n      if (data[\"@exclude\"] !== \"true\" && (data[\"@match\"] || data[\"@matches\"])) {\n        model.addUpdateMatch(data);\n      } else {\n        model.removeMatch(data);\n      }\n    }\n    if (data[\"@warning\"] && data[\"@exclude\"] !== \"true\") {\n      model.addUpdateWarnings(data);\n    } else {\n      model.removeWarnings(data);\n    }\n  } else if (ns === NS_PLACE) {\n    // model.placesItemUpdated(data);\n  } else if (ns === NS_MYSOURCE) {\n    // model.sourcesItemUpdated(data);\n  }\n}\n\n// export function updatePrimary(model, data) {\n//   model.primaryPerson = data;\n//   data[\"@exclude\"] = \"true\"; // force inclusion of root\"s ancestors by marking root excluded to start\n//   let includedItems = [];\n//   //ie.includeSelfAndAncestors(data, includedItems);\n//   includeItem(model, data, includedItems);\n//   updateRootDistances(model);\n//   executeServiceCall(wr.updatePrimaryPage(model.gedcomId, data.@id), makeRoot_result, wr.service_fault);\n//   saveIncludeExclude(\"false\", includedItems);\n// }\n\nexport function setRead(model, data, read) {\n  data[\"@read\"] = read;\n  itemUpdated(model, data);\n}\n\nexport function setWarningRead(model, data, read) {\n  data[\"@warningRead\"] = read;\n  itemUpdated(model, data);\n}\n\nexport function setMatchRead(model, data, read) {\n  data[\"@matchRead\"] = read;\n  itemUpdated(model, data);\n}\n\nexport function setUpdateRead(model, data, read) {\n  data[\"@updateRead\"] = read;\n  itemUpdated(model, data);\n}\n\nexport function setMatchHelperFields(result) {\n  result[\"@stdMatch\"] = result[\"@nomatch\"] === \"true\" ? NOMATCH : result[\"@match\"].toLowerCase();\n}\n\nexport function updateData(model, data, text) {\n  let ns = +data[\"@ns\"];\n  if (ns === NS_PERSON) {\n    let result = createModelObjectFromContent(\"person\", text);\n    copyData(data, result);\n    setStdPersonAttrs(data);\n  } else if (ns === NS_FAMILY) {\n    let result = createModelObjectFromContent(\"family\", text);\n    copyData(data, result);\n    setStdFamilyAttrs(data);\n  } else if (ns === NS_MYSOURCE) {\n    let result = createModelObjectFromContent(\"mysource\", text);\n    copyData(data, result);\n    setStdMySourceAttrs(data);\n  }\n  itemUpdated(model, data);\n}\n\nexport function createModelObjectFromContent(tag, content) {\n  let endTag = \"</\" + tag + \">\";\n  let endPos = content.indexOf(endTag) + endTag.length;\n  let root = parseXML(content.substr(0, endPos));\n  let result = xmlToJson(root);\n  result[\"#content\"] = content.substr(endPos).trim();\n  return result;\n}\n\nexport function setStdPersonAttrs(person) {\n  person[\"@stdDate\"] = getDateSortKey((getEventFact(person, \"Birth\") || {})[\"@date\"]);\n  person[\"@stdDeathDate\"] = getDateSortKey((getEventFact(person, \"Death\") || {})[\"@date\"]);\n  person[\"@stdName\"] = getPersonFullName(person).toLowerCase();\n}\n\nexport function setStdFamilyAttrs(family) {\n  family[\"@stdHusbandName\"] = getFullName(family[\"husband\"] ? family[\"husband\"][0] : null).toLowerCase();\n  family[\"@stdWifeName\"] = getFullName(family[\"wife\"] ? family[\"wife\"][0] : null).toLowerCase();\n  family[\"@stdName\"] = family[\"@stdHusbandName\"] + \" and \" + family[\"@stdWifeName\"];\n  family[\"@stdDate\"] = getDateSortKey((getEventFact(family, \"Marriage\") || {})[\"@date\"]);\n}\n\nexport function setStdMySourceAttrs(mysource) {\n  mysource[\"@stdName\"] = getMySourceName(mysource, null).toLowerCase();\n  mysource[\"@stdAuthor\"] = (mysource[\"author\"] && mysource[\"author\"][0][\"#text\"]\n    ? mysource[\"author\"][0][\"#text\"]\n    : \"\"\n  ).toLowerCase();\n}\n\nexport function getFullName(name) {\n  if (!name) {\n    return \"\";\n  }\n  return (\n    (name[\"@surname\"] || \"Unknown\") +\n    \",\" +\n    (name[\"@title_prefix\"] ? \" \" + name[\"@title_prefix\"] : \"\") +\n    (name[\"@given\"] ? \" \" + name[\"@given\"] : \"\") +\n    (name[\"@title_suffix\"] ? \" \" + name[\"@title_suffix\"] : \"\")\n  );\n}\n\nexport function getPersonFullName(person) {\n  if (!person) {\n    return \"\";\n  }\n  return getFullName(person[\"name\"] ? person[\"name\"][0] : null);\n}\n\nexport function getMySourceName(mysource, userName) {\n  let title = \"Source\";\n  if (mysource[\"title\"] && mysource[\"title\"][0][\"#text\"]) {\n    title = mysource[\"title\"][0][\"#text\"];\n  } else if (mysource[\"abbrev\"] && mysource[\"abbrev\"][0][\"#text\"]) {\n    title = mysource[\"abbrev\"][0][\"#text\"];\n  } else if (mysource[\"author\"] && mysource[\"author\"][0][\"#text\"]) {\n    title = mysource[\"author\"][0][\"#text\"];\n    if (mysource[\"publication_info\"] && mysource[\"publication_info\"][0][\"#text\"]) {\n      title += \" \" + mysource[\"publication_info\"][0][\"#text\"];\n    }\n  }\n  if (userName) {\n    title = userName + \"/\" + title;\n  }\n  return cleanWikiTitle(title);\n}\n\n//\n// local functions\n//\n\nfunction copyData(target, source) {\n  for (let key in target) {\n    if (target.hasOwnProperty(key) && !key.startsWith(\"@\")) {\n      delete target[key];\n    }\n  }\n  for (let key in source) {\n    if (source.hasOwnProperty(key) && !key.startsWith(\"@\")) {\n      target[key] = source[key];\n    }\n  }\n}\n\nfunction getGedcomPersonTitle(person) {\n  let title = getPersonTitle(person);\n  if (person[\"@exclude\"] === \"true\") {\n    title += \" - Excluded\";\n  }\n  title += \" (\" + person[\"@id\"] + \" gedcom)\";\n  return title;\n}\n\nfunction getGedcomFamilyTitle(model, family) {\n  let husband = family[\"husband\"] ? model.personMap[family[\"husband\"][0][\"@id\"]] : null;\n  let wife = family[\"wife\"] ? model.personMap[family[\"wife\"][0][\"@id\"]] : null;\n  let title = getFamilyTitle(husband, wife);\n  if (family[\"@exclude\"] === \"true\") {\n    title += \" - Excluded\";\n  }\n  title += \" (\" + family[\"@id\"] + \" gedcom)\";\n  return title;\n}\n\nfunction getGedcomSourceTitle(model, source, findAdd = false) {\n  if (findAdd && source[\"@match\"]) {\n    return \"Source:\" + source[\"@match\"];\n  } else {\n    let title = \"MySource:\" + getMySourceName(source, model.userName);\n    if (!findAdd) {\n      if (source[\"@exclude\"] === \"true\") {\n        title += \" - Excluded\";\n      }\n      title += \" (\" + source[\"@id\"] + \" gedcom)\";\n    }\n    return title;\n  }\n}\n\nfunction standardizePlace(model, placeText) {\n  let place = model.placeTextMap[placeText];\n  if (place) {\n    let std = place[\"@match\"];\n    if (place[\"@nomatch\"] === \"true\") {\n      return placeText;\n    } else if (!std) {\n      return place[\"@bestMatch\"] + \"|\" + placeText;\n    } else {\n      return std + \"|\" + placeText;\n    }\n  } else {\n    return placeText;\n  }\n}\n\nfunction updatePersonRef(model, ref, findAdd) {\n  let person = model.personMap[ref[\"@id\"]];\n  if (person) {\n    ref[\"@title\"] = getGedcomPersonTitle(person);\n    if (findAdd && person[\"@match\"]) {\n      // pass up match title separately\n      ref[\"@match\"] = person[\"@match\"];\n    }\n    if (person[\"@exclude\"] === \"true\") {\n      ref[\"@title_suffix\"] += \" - Excluded\";\n      if (findAdd) ref[\"@exclude\"] = \"true\";\n    }\n    if (person[\"@living\"] === \"true\") {\n      ref[\"@given\"] = \"Living\";\n      ref[\"@title_prefix\"] = \"\";\n      ref[\"@title_suffix\"] = \"\";\n      ref[\"@birthdate\"] = \"\";\n      ref[\"@birthplace\"] = \"\";\n      ref[\"@chrdate\"] = \"\";\n      ref[\"@chrplace\"] = \"\";\n      ref[\"@deathdate\"] = \"\";\n      ref[\"@deathplace\"] = \"\";\n      ref[\"@burialdate\"] = \"\";\n      ref[\"@burialplace\"] = \"\";\n    }\n  }\n  if (ref[\"@birthplace\"]) ref[\"@birthplace\"] = standardizePlace(model, ref[\"@birthplace\"]);\n  if (ref[\"@chrplace\"]) ref[\"@chrplace\"] = standardizePlace(model, ref[\"@chrplace\"]);\n  if (ref[\"@deathplace\"]) ref[\"@deathplace\"] = standardizePlace(model, ref[\"@deathplace\"]);\n  if (ref[\"@burialplace\"]) ref[\"@burialplace\"] = standardizePlace(model, ref[\"@burialplace\"]);\n  if (ref[\"@child_of_family\"]) {\n    let family = model.familyMap[ref[\"@child_of_family\"]];\n    if (family) ref[\"@child_of_family\"] = getGedcomFamilyTitle(model, family);\n  }\n}\n\nfunction updateFamilyRef(model, ref, findAdd) {\n  let family = model.familyMap[ref[\"@id\"]];\n  if (family) {\n    ref[\"@title\"] = getGedcomFamilyTitle(model, family);\n    if (findAdd && family[\"@match\"]) {\n      // pass up match title separately\n      ref[\"@match\"] = family[\"@match\"];\n    }\n    if (family[\"@exclude\"] === \"true\") {\n      if (findAdd) ref[\"@exclude\"] = \"true\";\n    }\n  }\n}\n\nfunction updateEventFact(model, ef) {\n  if (ef[\"@place\"]) ef[\"@place\"] = standardizePlace(model, ef[\"@place\"]);\n}\n\nfunction updateSourceCitation(model, citation, findAdd) {\n  let source = model.sourceMap[citation[\"@source_id\"]];\n  if (source) {\n    citation[\"@title\"] = getGedcomSourceTitle(model, source, findAdd);\n    if (source[\"@exclude\"] === \"true\") {\n      if (findAdd) citation[\"@exclude\"] = \"true\";\n    }\n  }\n}\n\nfunction deleteExcluded(list) {\n  if (!list) {\n    return;\n  }\n  for (let i = list.length - 1; i >= 0; i--) {\n    if (list[i][\"@exclude\"] === \"true\") {\n      list.splice(i, 1);\n    }\n  }\n}\n\nfunction cleanName(name) {\n  return name.replace(/[?~!@#$%^&*.()_+=/<>{}[\\];:\"\\\\,|]/g, \" \").replace(/\\s+/g, \" \");\n}\n\nfunction cleanWikiTitle(title) {\n  title = title\n    .replace(/[<[{]/g, \"(\")\n    .replace(/[>\\]}]/g, \")\")\n    .replace(/\\|/g, \"-\")\n    .replace(/_/g, \" \")\n    .replace(/#/g, \"number \")\n    .replace(/\\?/g, \" question \")\n    .replace(/\\+/g, \" plus \")\n    .replace(/%([0-9a-fA-F][0-9a-fA-F])/g, \"% $1\")\n    .replace(/\\s+/g, \" \")\n    .replace(/\\/\\/+/g, \"/\");\n  title = title.trim();\n  while (title.length > 0 && (title.startsWith(\".\") || title.startsWith(\"/\"))) {\n    title = title.substr(1);\n  }\n  if (title.length > 150) {\n    title = title.substr(0, 149);\n  }\n  return capitalize(title);\n}\n\nfunction getPrebarTitle(fullTitle) {\n  let pos = fullTitle.indexOf(\"|\");\n  return pos > 0 ? fullTitle.substr(0, pos) : fullTitle;\n}\n\nfunction getPersonTitle(person) {\n  let name = \"\";\n  if (person[\"@living\"] === \"true\") {\n    name = \"Living\";\n  } else {\n    name = person[\"name\"] && person[\"name\"][0][\"@given\"] ? person[\"name\"][0][\"@given\"].trim() : \"\";\n    let pos = name.indexOf(\" \");\n    if (pos > 0) {\n      name = name.substr(0, pos);\n    }\n  }\n  name = cleanName(name + \" \" + (person[\"name\"] && person[\"name\"][0][\"@surname\"] ? person[\"name\"][0][\"@surname\"] : \"\"));\n  return cleanWikiTitle(capitalize(name.toLowerCase(), true));\n}\n\nfunction getFamilyTitle(husband, wife) {\n  var title = \"\";\n  title += husband ? getPersonTitle(husband) : \"Unknown\";\n  title += \" and \";\n  title += wife ? getPersonTitle(wife) : \"Unknown\";\n  return title;\n}\n\nfunction getFamilyFullName(family) {\n  return (\n    getFullName(family[\"husband\"] ? family[\"husband\"][0] : null) +\n    \" and \" +\n    getFullName(family[\"wife\"] ? family[\"wife\"][0] : null)\n  );\n}\n","// escapes a string so we can embed it in XML\nexport function escapeXML(s) {\n  if (typeof s === \"number\") {\n    s = s.toString();\n  }\n  if (!s) {\n    return \"\";\n  }\n  return s\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/'/g, \"&apos;\")\n    .replace(/\"/g, \"&quot;\");\n}\n\n// escapes a string so we can embed it in HTML\nexport function htmlspecialchars(s) {\n  return s\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\");\n}\n\nconst slashRegExp = /%2F/g;\nconst colonRegExp = /%3A/g;\nconst spaceRegExp = /%20/g;\nconst hashRegExp = /%23/g;\n\nexport function encodeWikiURIComponent(url) {\n  // MediaWiki wants /'s in titles to not be encoded\n  // and we might as well unencode :'s so the titles look better\n  // also, we need to unencode #'s and spaces\n  return encodeURIComponent(url)\n    .replace(colonRegExp, \":\")\n    .replace(slashRegExp, \"/\")\n    .replace(spaceRegExp, \"_\")\n    .replace(hashRegExp, \"#\");\n}\n\nexport function capitalize(s, all = false) {\n  if (all) {\n    return s\n      .split(\" \")\n      .map(word => word.charAt(0).toUpperCase() + word.substr(1))\n      .join(\" \");\n  } else {\n    return s.charAt(0).toUpperCase() + s.substr(1);\n  }\n}\n\nexport function objectToQuery(obj) {\n  return Object.keys(obj)\n    .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(obj[k])}`)\n    .join(\"&\");\n}\n\nexport function similarity(a, b) {\n  let maxLen = Math.max(a.length, b.length);\n  return (maxLen - dziemba_levenshtein(a, b)) / maxLen;\n}\n\nfunction dziemba_levenshtein(a, b) {\n  let tmp;\n  if (a.length === 0) {\n    return b.length;\n  }\n  if (b.length === 0) {\n    return a.length;\n  }\n  if (a.length > b.length) {\n    tmp = a;\n    a = b;\n    b = tmp;\n  }\n\n  let i,\n    j,\n    res,\n    alen = a.length,\n    blen = b.length,\n    row = Array(alen);\n  for (i = 0; i <= alen; i++) {\n    row[i] = i;\n  }\n\n  for (i = 1; i <= blen; i++) {\n    res = i;\n    for (j = 1; j <= alen; j++) {\n      tmp = row[j - 1];\n      row[j - 1] = res;\n      res = b[i - 1] === a[j - 1] ? tmp : Math.min(tmp + 1, Math.min(res + 1, row[j] + 1));\n    }\n  }\n  return res;\n}\n","import { escapeXML } from \"@/utils/StringUtils\";\n\nexport function parseXML(data) {\n  const parser = new DOMParser();\n  return parser.parseFromString(data, \"application/xml\").documentElement;\n}\n\nexport function xmlToJson(xml) {\n  if (!xml) {\n    return null;\n  }\n  let obj = {};\n  if (xml.nodeType === 1) {\n    // element\n    obj[\"#tag\"] = xml.nodeName;\n    // do attributes\n    for (let j = 0; j < xml.attributes.length; j++) {\n      let attribute = xml.attributes.item(j);\n      obj[\"@\" + attribute.nodeName] = attribute.nodeValue;\n    }\n  } else if (xml.nodeType === 3) {\n    // text\n    obj = xml.nodeValue.trim();\n  }\n\n  // do children\n  if (xml.hasChildNodes()) {\n    for (let i = 0; i < xml.childNodes.length; i++) {\n      let item = xml.childNodes.item(i);\n      let value = xmlToJson(item);\n      if (!value) {\n        continue;\n      }\n      if (item.nodeType === 3) {\n        obj[\"#text\"] = value;\n        continue;\n      }\n      let nodeName = item.nodeName;\n      if (!obj[nodeName]) {\n        obj[nodeName] = [];\n      }\n      obj[nodeName].push(value);\n    }\n  }\n  return obj;\n}\n\nexport function toXMLString(data) {\n  let tag = data[\"#tag\"] || \"gedcom\";\n  let text = data[\"#text\"] || \"\";\n  let content = data[\"#content\"] || \"\";\n  let attrs = [];\n  let children = [];\n  for (let k of Object.keys(data)) {\n    if (k.startsWith(\"#\")) {\n      // ignore\n    } else if (k.startsWith(\"@\")) {\n      if (data[k] != null) {\n        attrs.push(` ${k.substr(1)}=\"${escapeXML(data[k])}\"`);\n      }\n    } else {\n      for (let e of data[k]) {\n        children.push(toXMLString(e));\n      }\n    }\n  }\n  if (content) {\n    children.push(\"<content>\" + escapeXML(content) + \"</content>\");\n  }\n  return `<${tag}${attrs.join(\"\")}>${children.join(\"\")}${escapeXML(text)}</${tag}>`;\n}\n\nexport function getChildElementsWithTag(elm, tag) {\n  let children = [];\n  for (let i = 0; i < elm.children.length; i++) {\n    if (elm.children[i].tagName === tag) {\n      children.push(elm.children[i]);\n    }\n  }\n  return children;\n}\n\nexport function getElementText(xml) {\n  for (let i = 0; i < xml.childNodes.length; i++) {\n    let item = xml.childNodes.item(i);\n    let value = xmlToJson(item);\n    if (!value) {\n      continue;\n    }\n    if (item.nodeType === 3) {\n      return value;\n    }\n  }\n  return \"\";\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"app\"}},[_c('v-navigation-drawer',{attrs:{\"clipped\":true,\"mini-variant\":_vm.$vuetify.breakpoint.mdAndDown,\"permanent\":true,\"width\":180,\"app\":\"\"}},[_c('v-list',{attrs:{\"dense\":\"\"}},[_vm._l((_vm.items),function(item){return [_c('v-list-item',{key:item.text,attrs:{\"to\":item.link,\"link\":\"\"}},[_c('v-list-item-action',[_c('v-icon',{attrs:{\"title\":item.text}},[_vm._v(_vm._s(item.icon))])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(item.text))])],1)],1)]})],2)],1),_c('v-main',[_c('multipane',{staticClass:\"horizontal-panes\",attrs:{\"layout\":\"horizontal\"}},[_c('div',{style:({ minHeight: '10%', maxHeight: '90%', height: '250px' }),attrs:{\"id\":\"container-wrapper\"}},[_c('Notifications'),_c('v-container',[_c('v-row',[_c('router-view',{key:_vm.$route.fullPath,attrs:{\"id\":\"view\"}})],1)],1)],1),_c('multipane-resizer'),_c('div',{staticClass:\"iframe-parent\",style:({ minHeight: '10%', maxHeight: '90%', flexGrow: 1 })},[_c('iframe',{style:({ flexGrow: 1 }),attrs:{\"id\":\"iframe\",\"src\":\"https://www.werelate.org/wiki/Help:Review_GEDCOM\",\"frameborder\":\"0\"}})])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Snackbars',{attrs:{\"messages\":_vm.notifications.notificationsList,\"id-key\":\"id\",\"color-key\":\"type\",\"text-key\":\"message\",\"timeout\":\"5000\",\"top\":\"\",\"right\":\"\"},on:{\"remove\":_vm.notificationsRemove}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.snackbars),function(snackbar,idx){return _c('v-snackbar',_vm._b({key:snackbar.id,class:'snackbars snackbars-' + idx + '-' + _vm.identifier,attrs:{\"timeout\":-1,\"color\":snackbar.color},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_vm._t(\"action\",[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.removeMessage(snackbar.id)}}},[_vm._v(\"close\")])],{\"close\":_vm.removeMessage,\"id\":snackbar.id,\"index\":idx,\"message\":snackbar.text})]},proxy:true}],null,true),model:{value:(snackbar.show),callback:function ($$v) {_vm.$set(snackbar, \"show\", $$v)},expression:\"snackbar.show\"}},'v-snackbar',_vm.$attrs,false),[_vm._v(\" \"+_vm._s(snackbar.text)+\" \")])}),_c('css-style',[_vm._v(\" .snackbars .v-snack__wrapper { transition: \"+_vm._s(_vm.topOrBottom)+\" 500ms; \"+_vm._s(_vm.topOrBottom)+\": 0; } \")]),_vm._l((_vm.len),function(idx){return _c('css-style',{key:'snackbars-css' + idx},[_vm._v(\" .snackbars.snackbars-\"+_vm._s(idx)+\"-\"+_vm._s(_vm.identifier)+\" > .v-snack__wrapper { \"+_vm._s(_vm.topOrBottom)+\":\"+_vm._s(idx * _vm.distance)+\"px; } \")])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Copied from https://github.com/Aymkdn/v-snackbars -->\n<template>\n  <div>\n    <v-snackbar\n      v-bind=\"$attrs\"\n      v-model=\"snackbar.show\"\n      :key=\"snackbar.id\"\n      :class=\"'snackbars snackbars-' + idx + '-' + identifier\"\n      :timeout=\"-1\"\n      :color=\"snackbar.color\"\n      v-for=\"(snackbar, idx) in snackbars\"\n    >\n      {{ snackbar.text }}\n      <template v-slot:action>\n        <slot name=\"action\" :close=\"removeMessage\" :id=\"snackbar.id\" :index=\"idx\" :message=\"snackbar.text\">\n          <v-btn text @click=\"removeMessage(snackbar.id)\">close</v-btn>\n        </slot>\n      </template>\n    </v-snackbar>\n    <css-style> .snackbars .v-snack__wrapper { transition: {{ topOrBottom }} 500ms; {{ topOrBottom }}: 0; } </css-style>\n    <css-style :key=\"'snackbars-css' + idx\" v-for=\"idx in len\">\n      .snackbars.snackbars-{{ idx }}-{{ identifier }} > .v-snack__wrapper { {{ topOrBottom }}:{{ idx * distance }}px; }\n    </css-style>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"snackbars\",\n  props: {\n    messages: {\n      type: Array,\n      default: () => []\n    },\n    idKey: {\n      type: String\n    },\n    textKey: {\n      type: String,\n      default: \"text\"\n    },\n    colorKey: {\n      type: String,\n      default: \"color\"\n    },\n    timeout: {\n      type: [Number, String],\n      default: 5000\n    },\n    distance: {\n      type: [Number, String],\n      default: 55\n    }\n  },\n  data() {\n    return {\n      topOrBottom: \"bottom\",\n      len: 0, // we need it to have a css transition\n      snackbars: [], // array of {id, text, color, show(true)}\n      identifier: Date.now() + (Math.random() + \"\").slice(2)\n    };\n  },\n  components: {\n    \"css-style\": {\n      render: function(createElement) {\n        return createElement(\"style\", this.$slots.default);\n      }\n    }\n  },\n  watch: {\n    messages() {\n      this.setSnackbars();\n    }\n  },\n  methods: {\n    setSnackbars() {\n      this.snackbars = this.snackbars.filter(snackbar =>\n        this.messages.some(message => message[this.idKey] === snackbar.id)\n      );\n      this.messages.forEach(message => {\n        let snackbar = this.snackbars.find(snackbar => snackbar.id === message.id);\n        if (snackbar) {\n          snackbar.text = message[this.textKey];\n          snackbar.color = message[this.colorKey];\n        } else {\n          let id = message[this.idKey];\n          this.snackbars.push({\n            id: id,\n            text: message[this.textKey],\n            color: message[this.colorKey],\n            show: true\n          });\n          if (this.timeout > 0) {\n            setTimeout(() => this.removeMessage(id), this.timeout * 1);\n          }\n        }\n      });\n      if (this.snackbars.length > this.len) this.len = this.snackbars.length;\n    },\n    removeMessage(id) {\n      this.$emit(\"remove\", id);\n    }\n  },\n  created() {\n    if (typeof this.$attrs.top !== \"undefined\" && this.$attrs.top !== false) this.topOrBottom = \"top\";\n    this.setSnackbars();\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Snackbars.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Snackbars.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Snackbars.vue?vue&type=template&id=7a20b444&\"\nimport script from \"./Snackbars.vue?vue&type=script&lang=js&\"\nexport * from \"./Snackbars.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\ninstallComponents(component, {VBtn,VSnackbar})\n","<template>\n  <Snackbars\n    :messages=\"notifications.notificationsList\"\n    id-key=\"id\"\n    color-key=\"type\"\n    text-key=\"message\"\n    timeout=\"5000\"\n    @remove=\"notificationsRemove\"\n    top\n    right\n  ></Snackbars>\n</template>\n\n<script>\nimport Snackbars from \"./Snackbars.vue\";\nimport { mapState, mapActions } from \"vuex\";\n\nexport default {\n  components: {\n    Snackbars: Snackbars\n  },\n  computed: mapState([\"notifications\"]),\n  methods: mapActions([\"notificationsRemove\"])\n};\n</script>\n\n<style scoped>\n.notifications {\n  position: fixed;\n  top: 80px;\n  right: 0;\n  padding-right: 32px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notifications.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notifications.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Notifications.vue?vue&type=template&id=500354fe&scoped=true&\"\nimport script from \"./Notifications.vue?vue&type=script&lang=js&\"\nexport * from \"./Notifications.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Notifications.vue?vue&type=style&index=0&id=500354fe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"500354fe\",\n  null\n  \n)\n\nexport default component.exports","export const MESSAGES = {\n  // import instructions\n  internalDuplicates:\n    \"Files with internal duplicates cannot be imported.  Review the duplicates on the Warnings tab, remove the duplicates from your desktop genealogy program, remove this GEDCOM, and upload a revised GEDCOM.\",\n  notReady: \"Before your GEDCOM is ready to import, you need to: \",\n  notReadyWarnings: \"Click on each of the warnings in the Warnings tab to review the warning.\",\n  notReadyFamilies:\n    \"Click on each of the families in the Family Matches tab, decide whether the existing family matches your GEDCOM family, and click on 'Match' or 'Not a Match' in the bottom pane.\",\n  notImportable:\n    \"Your GEDCOM cannot be imported to WeRelate in its current form, either because it has too many warnings or it contains duplicates.  Click on the Warnings tab, print the warnings, correct or remove the incorrect information in your desktop genealogy program, remove this GEDCOM, and upload a revised GEDCOM.\",\n  probablyNotImportable:\n    \"Your GEDCOM has a high percentage of warnings and will likely be rejected.  We recommend that you click on the Warnings tab, print the warnings, correct or remove the incorrect information in your desktop genealogy program, remove this GEDCOM, and upload a revised GEDCOM.\",\n  phase2: \"Congratulations! Your GEDCOM is ready to import.  Click on the button below\",\n  phase3: \"Your GEDCOM is ready for import and will be imported shortly.\",\n  adminReviewAdmin:\n    'Dear Admin, please click on \"Ready to Import\" if the GEDCOM is ok to import, leave a message for the uploader if there are questions or problems, or click on \"Return to user review\" to allow the uploader to re-review the GEDCOM.',\n  adminReview:\n    \"An administrator will review your GEDCOM shortly and finalize the import or contact you with any questions.\",\n  // quality rating messages\n  warningsAboveLowerThreshold:\n    \"This file has a high percentage of warnings and will likely be rejected.  We recommend that you click on the Warnings tab, print the warnings, correct or remove the incorrect information in your desktop genealogy program, remove this GEDCOM, and upload a revised GEDCOM.\",\n  warningsAboveUpperThreshold:\n    \"This file has too many warnings to import.  Click on the Warnings tab, print the warnings, correct or remove the incorrect information in your desktop genealogy program, remove this GEDCOM, and upload a revised GEDCOM.\",\n  // next steps\n  nextsteps:\n    \"Click on the icons at the left from top to bottom.  Read the help in the bottom frame. Tip: Slowly drag the dividing bar below up or down to resize the bottom pane.\",\n  returntowerelate: \"Finish your review later.\",\n  removegedcom: \"In case you change your mind about uploading this GEDCOM, you can remove it.\",\n  onhold:\n    \"A hold has been placed on your GEDCOM. Would you please review the messages on your talk page shown below?  Once the questions have been resolved the hold will be removed.\",\n  // status messages\n  statuswaiting: \"Your GEDCOM is waiting to be analyzed.  Please check back later.\",\n  statusanalyzing: \"Your GEDCOM is currently being analyzed.  Please check back later.\",\n  statusdelete: \"Your GEDCOM has been removed.\",\n  statusphase2: \"The GEDCOM has been returned to user review.\",\n  statusphase3:\n    \"Thank you! Wiki pages for your GEDCOM will be created shortly. You will receive a message on your talk page as soon as they are ready.\",\n  statushold: \"The GEDCOM has been placed on hold.\",\n  statuszero: \"Something went wrong. It's our fault. Please try again later.\",\n  statusother: \"Something went wrong. It's our fault. Please try again later.\",\n  // error messages\n  notsignedin:\n    'Please sign in by clicking on the \"Sign in\" link near the upper-right corner of the page, then re-load this program by clicking on the review link again.',\n  notauthorized:\n    \"You are not authorized to review this GEDCOM; if you have questions, please contact dallan@werelate.org\",\n  gedcomnotfound:\n    \"Error reading the GEDCOM; please try again in a few minutes; if you have questions, please contact dallan@werelate.org\",\n  gedcomhold:\n    \"The GEDCOM has been placed on hold. Please go to your talk page (select Talk Page from the MyRelate menu) for more information.\",\n  unexpectederror: \"Something went wrong. It's our fault. Please try again later.\"\n};\n","import { NS_PERSON } from \"@/utils/ModelUtils\";\n\nexport default class Model {\n  constructor() {\n    this.gedcomId = 0;\n    this.userName = \"\";\n    this.status = 0;\n    this.importInstructions = \"\";\n    this.nextSteps = \"\";\n    this.isOwner = false;\n    this.isAdmin = false;\n    this.isUpdatable = false;\n    this.isReturnable = false;\n    this.isHoldable = false;\n    this.isImportable = false;\n    this.isMatchable = false;\n    this.isMergeable = false;\n    this.primaryPerson = null;\n    this.peopleToImport = 0;\n    this.peopleExcluded = 0;\n    this.peopleMatched = 0;\n    this.familiesToImport = 0;\n    this.familiesExcluded = 0;\n    this.familiesMatched = 0;\n    this.warningsRead = 0;\n    this.warningsUnread = 0;\n    this.warningLevel = 0.0;\n    this.warningComment = \"\";\n    this.duplicateCount = 0;\n    this.duplicateComment = \"\";\n    this.sourcesToImport = 0;\n    this.sourcesMatched = 0;\n    this.sourcesExcluded = 0;\n    this.sourcesCitationOnly = 0;\n    this.totalNonExcludedSources = 0;\n    this.placesMatched = 0;\n    this.placesUnmatched = 0;\n    this.matchesMatched = 0;\n    this.matchesUnmatched = 0;\n    this.matchesUndecided = 0;\n    this.updatesMade = 0;\n    this.updatesNotMade = 0;\n    this.personMap = {};\n    this.familyMap = {};\n    this.sourceMap = {};\n    this.placeMap = {};\n    this.placeTextMap = {};\n    this.people = [];\n    this.families = [];\n    this.sources = [];\n    this.places = [];\n    this.warnings = [];\n    this.matches = [];\n    this.updates = [];\n  }\n\n  addPerson(person) {\n    this.people.push(person);\n    this.personMap[person[\"@id\"]] = person;\n  }\n\n  addFamily(family) {\n    this.families.push(family);\n    this.familyMap[family[\"@id\"]] = family;\n  }\n\n  addSource(source) {\n    this.sources.push(source);\n    this.sourceMap[source[\"@id\"]] = source;\n  }\n\n  addPlace(place) {\n    this.places.push(place);\n    this.placeMap[place[\"@id\"]] = place;\n    this.placeTextMap[place[\"@text\"]] = place;\n  }\n\n  getItemIndex(a, data) {\n    return a.findIndex(it => it[\"@id\"] === data[\"@id\"]);\n  }\n\n  addUpdate(a, data) {\n    if (this.getItemIndex(a, data) >= 0) {\n      // a.itemUpdated()\n    } else {\n      a.push(data);\n    }\n  }\n\n  remove(a, data) {\n    let pos = this.getItemIndex(a, data);\n    if (pos >= 0) {\n      a.splice(pos, 1);\n    }\n  }\n\n  addUpdateWarnings(pf, readWarnings) {\n    let warns = pf[\"@warning\"].split(\"|\");\n    for (let i = 0; i < warns.length; i++) {\n      let warn = warns[i];\n      let x = {};\n      if (pf[\"@id\"].includes(\"|\")) {\n        // pf is a warning\n        x[\"@id\"] = pf[\"@id\"];\n        x[\"@warning\"] = pf[\"@warning\"];\n        x[\"@warningLevel\"] = pf[\"@warningLevel\"];\n      } else {\n        x[\"@id\"] = pf[\"@id\"] + \"|\" + i.toString();\n        let level = +warn.substr(0, 1);\n        if (Number.isNaN(level)) {\n          x[\"@warningLevel\"] = 1;\n          x[\"@warning\"] = warn;\n        } else {\n          x[\"@warningLevel\"] = level;\n          x[\"@warning\"] = warn.substr(1);\n        }\n      }\n      x[\"@stdName\"] = pf[\"@stdName\"];\n      x[\"@ns\"] = pf[\"@ns\"];\n      if (+x[\"@ns\"] === NS_PERSON) {\n        x[\"person\"] = [pf];\n      } else {\n        x[\"family\"] = [pf];\n      }\n      if (readWarnings) {\n        x[\"@warningRead\"] = readWarnings[x[\"@id\"]] ? \"true\" : \"\";\n      }\n      this.addUpdate(this.warnings, x);\n    }\n  }\n\n  removeWarnings(pf) {\n    let prefix = pf[\"@id\"] + \"|\";\n    for (let i = this.warnings.length - 1; i >= 0; i--) {\n      if (this.warnings[i][\"@id\"].startsWith(prefix)) {\n        this.remove(this.warnings, this.warnings[i]);\n      }\n    }\n  }\n\n  addUpdateMatch(data) {\n    this.addUpdate(this.matches, data);\n  }\n\n  removeMatch(data) {\n    this.remove(this.matches, data);\n  }\n\n  addUpdateUpdate(data) {\n    this.addUpdate(this.updates, data);\n  }\n\n  removeUpdate(data) {\n    this.remove(this.updates, data);\n  }\n\n  // peopleItemUpdated(person) {\n  //   let pos = this.people.findIndex(it => it[\"@id\"] === person[\"@id\"]);\n  //   this.people.splice(pos, 1, person);\n  //   this.personMap[person[\"@id\"]] = person;\n  // }\n\n  // familiesItemUpdated(family) {\n  //   let pos = this.families.findIndex(it => it[\"@id\"] === family[\"@id\"]);\n  //   this.families.splice(pos, 1, family);\n  //   this.familyMap[family[\"@id\"]] = family;\n  // }\n\n  // sourcesItemUpdated(source) {\n  //   let pos = this.sources.findIndex(it => it[\"@id\"] === source[\"@id\"]);\n  //   this.sources.splice(pos, 1, source);\n  //   this.sourceMap[source[\"@id\"]] = source;\n  // }\n\n  // placesItemUpdated(place) {\n  //   let pos = this.places.findIndex(it => it[\"@id\"] === place[\"@id\"]);\n  //   this.places.splice(pos, 1, place);\n  //   this.placeMap[place[\"@id\"]] = place;\n  //   this.placeTextMap[place[\"@text\"]] = place;\n  // }\n\n  // warningsItemUpdated(warning) {\n  //   let pos = this.warnings.findIndex(it => it[\"@id\"] === warning[\"@id\"]);\n  //   this.warnings.splice(pos, 1, warning);\n  // }\n}\n","import { MESSAGES } from \"@/utils/Messages\";\nimport {\n  MATCHES,\n  NOMATCH,\n  NS_FAMILY,\n  NS_MYSOURCE,\n  NS_PERSON,\n  NS_PLACE,\n  PLACES,\n  SOURCES,\n  UPDATES,\n  WARNINGS,\n  STATUS_ADMIN_REVIEW,\n  STATUS_HOLD,\n  STATUS_IMPORTING,\n  STATUS_PHASE2,\n  STATUS_PHASE3,\n  getDataComponent,\n  getUnprefixedTitle,\n  setMatchHelperFields,\n  setStdPersonAttrs,\n  setStdFamilyAttrs,\n  setStdMySourceAttrs,\n  updateData,\n  createModelObjectFromContent\n} from \"@/utils/ModelUtils\";\nimport { getChildElementsWithTag, getElementText } from \"@/utils/XMLUtils\";\nimport Model from \"@/utils/Model\";\nimport { updateRootDistances } from \"@/utils/IncludeExclude\";\nimport { visitUserTalk } from \"@/utils/WeRelateUtils\";\n\n// const UPDATE_DISTANCES_INIT = 0;\n// const UPDATE_DISTANCES_EXCLUDE = 1;\n// const UPDATE_DISTANCES_INCLUDE = 2;\n// const NAME_MATCH_THRESHOLD = 60;\nconst ALLOWED_WARNINGS = 5;\nconst WARNING_LOWER_THRESHOLD = 2.0;\nconst WARNING_UPPER_THRESHOLD = 4.0;\n\nexport function loadGedcom(elm, gedcomId, prefsGetReadItems) {\n  let model = new Model();\n  model.gedcomId = gedcomId;\n\n  let readPlaces = prefsGetReadItems(model.gedcomId, PLACES);\n  let readSources = prefsGetReadItems(model.gedcomId, SOURCES);\n\n  for (let page of getChildElementsWithTag(elm, \"page\")) {\n    let ns = +page.getAttribute(\"namespace\");\n    if (ns === NS_PERSON) {\n      let person = createModelObject(\"person\", page);\n      setStdPersonAttrs(person);\n      model.addPerson(person);\n    } else if (ns === NS_FAMILY) {\n      let family = createModelObject(\"family\", page);\n      setStdFamilyAttrs(family);\n      model.addFamily(family);\n    } else if (ns === NS_MYSOURCE) {\n      let mysource = createModelObject(\"mysource\", page);\n      setStdMySourceAttrs(mysource);\n      mysource[\"@read\"] = readSources[mysource[\"@id\"]] ? \"true\" : \"\";\n      model.addSource(mysource);\n    }\n  }\n\n  model.sourcesCitationOnly = +elm.getAttribute(\"citation_only_sources\");\n\n  setPrimary(model, elm.getAttribute(\"primary_person\"));\n  if (!model.primaryPerson && model.people.length > 0) {\n    model.primaryPerson = model.people[0];\n  }\n\n  for (let p of getChildElementsWithTag(elm, \"place\")) {\n    let place = {\n      \"@id\": p.getAttribute(\"key\"),\n      \"@ns\": NS_PLACE,\n      \"@text\": p.getAttribute(\"text\"),\n      \"@stdName\": p.getAttribute(\"text\").toLowerCase(),\n      \"@bestMatch\": p.getAttribute(\"title\")\n    };\n    place[\"@match\"] = !p.getAttribute(\"error\") ? p.getAttribute(\"title\") : \"\";\n    setMatchHelperFields(place);\n    place[\"@read\"] = readPlaces[place[\"@id\"]] ? \"true\" : \"\";\n    model.addPlace(place);\n  }\n\n  return model;\n}\n\nexport function loadGedcomData(model, elm) {\n  model.userName = elm.getAttribute(\"username\");\n  model.isOwner = elm.getAttribute(\"owner\") === \"true\";\n  model.isAdmin = elm.getAttribute(\"admin\") === \"true\";\n  setStatus(model, elm.getAttribute(\"gedcomStatus\"));\n  setPrimary(model, elm.getAttribute(\"primary\"));\n\n  for (let row of getChildElementsWithTag(elm, \"result\")) {\n    let dataComponent = getDataComponent(model, row.getAttribute(\"key\"));\n    if (!dataComponent) {\n      continue;\n    }\n    let data = dataComponent.data;\n    let match = row.getAttribute(\"match\");\n    let text = getElementText(row);\n    if (text) {\n      updateData(model, data, text);\n      data[\"@edited\"] = \"true\";\n    }\n    if (row.getAttribute(\"exclude\") && +row.getAttribute(\"exclude\")) {\n      data[\"@exclude\"] = getTrueFalse(row.getAttribute(\"exclude\"));\n    }\n    if (row.getAttribute(\"living\") && +row.getAttribute(\"living\")) {\n      data[\"@living\"] = getTrueFalse(row.getAttribute(\"living\"));\n    }\n    if (row.getAttribute(\"merged\") && +row.getAttribute(\"merged\")) {\n      data[\"@merged\"] = getTrueFalse(row.getAttribute(\"merged\"));\n    }\n    if (match) {\n      if (match === NOMATCH) {\n        data[\"@match\"] = \"\";\n        data[\"@nomatch\"] = \"true\";\n      } else {\n        data[\"@match\"] = getUnprefixedTitle(match);\n      }\n      setMatchHelperFields(data);\n    }\n    if (row.getAttribute(\"matches\")) {\n      data[\"@matches\"] = row.getAttribute(\"matches\");\n      setMatchHelperFields(data);\n    }\n  }\n}\n\nexport function modelLoaded(model, prefsGetReadItems) {\n  updateRootDistances(model);\n  loadWarningsMatchesUpdates(model, prefsGetReadItems);\n  updateCounts(model);\n\n  if (model.status === STATUS_HOLD) {\n    visitUserTalk(model);\n  }\n}\n\nfunction createModelObject(tag, elm) {\n  let result = createModelObjectFromContent(tag, getChildElementsWithTag(elm, \"content\")[0].textContent);\n  result[\"@id\"] = elm.getAttribute(\"id\") || \"\";\n  result[\"@ns\"] = elm.getAttribute(\"namespace\") || \"\";\n  result[\"@exclude\"] = elm.getAttribute(\"exclude\") || \"\";\n  result[\"@living\"] = elm.getAttribute(\"living\") || \"\";\n  result[\"@beforeCutoff\"] = elm.getAttribute(\"beforeCutoff\") || \"\";\n  result[\"@match\"] = elm.getAttribute(\"match\") || \"\";\n  result[\"@matches\"] = elm.getAttribute(\"potentialMatches\") || \"\";\n  setMatchHelperFields(result);\n  result[\"@gedcomMatches\"] = elm.getAttribute(\"potentialMatches\") || \"\";\n  result[\"@warning\"] = elm.getAttribute(\"problems\") || \"\";\n  return result;\n}\n\nexport function updateCounts(model) {\n  let peopleToImport = 0;\n  let peopleExcluded = 0;\n  let peopleMatched = 0;\n  for (let page of model.people) {\n    if (page[\"@exclude\"] === \"true\") {\n      peopleExcluded++;\n    } else if (!page[\"@match\"]) {\n      peopleToImport++;\n    } else {\n      peopleMatched++;\n    }\n  }\n  model.peopleToImport = peopleToImport;\n  model.peopleExcluded = peopleExcluded;\n  model.peopleMatched = peopleMatched;\n\n  let familiesToImport = 0;\n  let familiesExcluded = 0;\n  let familiesMatched = 0;\n  for (let page of model.families) {\n    if (page[\"@exclude\"] === \"true\") {\n      familiesExcluded++;\n    } else if (!page[\"@match\"]) {\n      familiesToImport++;\n    } else {\n      familiesMatched++;\n    }\n  }\n  model.familiesToImport = familiesToImport;\n  model.familiesExcluded = familiesExcluded;\n  model.familiesMatched = familiesMatched;\n\n  let warningsRead = 0;\n  let warningsUnread = 0;\n  let warningCount = 0;\n  let dupCount = 0;\n  for (let warn of model.warnings) {\n    if (warn[\"@warningLevel\"] >= 3) {\n      dupCount++;\n    }\n    warningCount += +warn[\"@warningLevel\"];\n    if (warn[\"@warningRead\"] === \"true\") {\n      warningsRead++;\n    } else {\n      warningsUnread++;\n    }\n  }\n  let warningLevel = (warningCount * 100) / Math.max(peopleToImport + peopleMatched, 1.0);\n  model.warningCount = warningCount;\n  model.warningLevel = warningLevel;\n  model.duplicateCount = dupCount;\n  model.warningsRead = warningsRead;\n  model.warningsUnread = warningsUnread;\n\n  let sourcesToImport = 0;\n  let sourcesExcluded = 0;\n  let sourcesMatched = 0;\n  for (let page of model.sources) {\n    if (page[\"@exclude\"] === \"true\") {\n      sourcesExcluded++;\n    } else if (!page[\"@match\"]) {\n      sourcesToImport++;\n    } else {\n      sourcesMatched++;\n    }\n  }\n  model.sourcesToImport = sourcesToImport;\n  model.sourcesExcluded = sourcesExcluded;\n  model.sourcesMatched = sourcesMatched;\n  model.totalNonExcludedSources = model.sourcesToImport + model.sourcesMatched + model.sourcesCitationOnly;\n\n  let placesMatched = 0;\n  let placesUnmatched = 0;\n  for (let page of model.places) {\n    if (!page[\"@match\"]) {\n      placesUnmatched++;\n    } else {\n      placesMatched++;\n    }\n  }\n  model.placesMatched = placesMatched;\n  model.placesUnmatched = placesUnmatched;\n\n  let matchesMatched = 0;\n  let matchesUnmatched = 0;\n  let matchesUndecided = 0;\n  for (let page of model.matches) {\n    if (page[\"@nomatch\"] === \"true\") {\n      matchesUnmatched++;\n    } else if (page[\"@match\"]) {\n      matchesMatched++;\n    } else {\n      matchesUndecided++;\n    }\n  }\n  model.matchesMatched = matchesMatched;\n  model.matchesUnmatched = matchesUnmatched;\n  model.matchesUndecided = matchesUndecided;\n\n  let updatesMade = 0;\n  let updatesNotMade = 0;\n  for (let page of model.updates) {\n    if (page[\"@merged\"] === \"true\") {\n      updatesMade++;\n    } else {\n      updatesNotMade++;\n    }\n  }\n  model.updatesMade = updatesMade;\n  model.updatesNotMade = updatesNotMade;\n\n  updateFlags(model);\n}\n\nfunction isBelowLowerThreshold(model) {\n  return model.warningCount <= ALLOWED_WARNINGS || model.warningLevel < WARNING_LOWER_THRESHOLD;\n}\n\nfunction isBelowUpperThreshold(model) {\n  return model.warningCount <= ALLOWED_WARNINGS || model.warningLevel < WARNING_UPPER_THRESHOLD;\n}\n\nfunction updateFlags(model) {\n  if (isBelowLowerThreshold(model)) {\n    model.warningComment = \"\";\n  } else if (isBelowUpperThreshold(model)) {\n    model.warningComment = MESSAGES[\"warningsAboveLowerThreshold\"];\n  } else {\n    model.warningComment = MESSAGES[\"warningsAboveUpperThreshold\"];\n  }\n  if (!model.duplicateCount) {\n    model.duplicateComment = \"\";\n  } else {\n    model.duplicateComment = MESSAGES[\"internalDuplicates\"];\n  }\n  model.isUpdatable = false;\n  model.isReturnable = false;\n  model.isHoldable = false;\n  model.isImportable = false;\n  model.isMatchable = false;\n  if (model.status === STATUS_PHASE2) {\n    let warnings = [];\n    if (model.warningsUnread > 0) {\n      warnings.push(MESSAGES[\"notReadyWarnings\"]);\n    }\n    if (model.matchesUndecided > 0) {\n      warnings.push(MESSAGES[\"notReadyFamilies\"]);\n    }\n    if (!isBelowUpperThreshold(model) || model.duplicateCount > 0) {\n      model.importInstructions = MESSAGES[\"notImportable\"];\n    } else if (warnings.length > 0) {\n      model.importInstructions = MESSAGES[\"notReady\"] + warnings.join(\"; \");\n    } else if (!isBelowLowerThreshold(model)) {\n      model.importInstructions = MESSAGES[\"probablyNotImportable\"];\n    } else {\n      model.importInstructions = MESSAGES[\"phase2\"];\n    }\n    model.isUpdatable = true;\n    model.isImportable =\n      (isBelowUpperThreshold(model) && model.duplicateCount === 0 && warnings.length === 0) || model.isAdmin;\n    model.isMatchable = (isBelowUpperThreshold(model) && model.duplicateCount === 0) || model.isAdmin;\n    model.isHoldable = model.isAdmin;\n    model.nextSteps = MESSAGES[\"nextsteps\"];\n  } else if (model.status === STATUS_HOLD) {\n    model.nextSteps = MESSAGES[\"onhold\"];\n    model.isUpdatable = true;\n    model.isReturnable = model.isAdmin;\n  } else if (model.status === STATUS_PHASE3 || model.status === STATUS_IMPORTING) {\n    model.importInstructions = model.nextSteps = MESSAGES[\"phase3\"];\n  } else if (model.status === STATUS_ADMIN_REVIEW && model.isAdmin) {\n    model.importInstructions = MESSAGES[\"adminReviewAdmin\"];\n    model.nextSteps = MESSAGES[\"nextsteps\"];\n    model.isUpdatable = true;\n    model.isReturnable = true;\n    model.isImportable = true;\n    model.isMatchable = true;\n  } else if (model.status === STATUS_ADMIN_REVIEW) {\n    model.importInstructions = model.nextSteps = MESSAGES[\"adminReview\"];\n  } else if (model.status === 0) {\n    // I don't know how they get in this status\n    model.importInstructions = model.nextSteps = MESSAGES[\"statuszero\"];\n  } else {\n    model.importInstructions = model.nextSteps = MESSAGES[\"statusother\"] + \": \" + model.status.toString();\n  }\n  model.isMergeable =\n    model.isUpdatable && ((isBelowLowerThreshold(model) && model.duplicateCount === 0) || model.isAdmin);\n}\n\nfunction loadWarningsMatchesUpdates(model, prefsGetReadItems) {\n  let readWarnings = prefsGetReadItems(model.gedcomId, WARNINGS);\n  let readMatches = prefsGetReadItems(model.gedcomId, MATCHES);\n  let readUpdates = prefsGetReadItems(model.gedcomId, UPDATES);\n\n  for (let person of model.people) {\n    if (person[\"@exclude\"] !== \"true\") {\n      if (person[\"@warning\"]) {\n        model.addUpdateWarnings(person, readWarnings);\n      }\n      if (person[\"@updated\"] === \"true\") {\n        person[\"@updateRead\"] = readUpdates[person[\"@id\"]] ? \"true\" : \"\";\n        model.addUpdateUpdate(person);\n      }\n    }\n  }\n  for (let family of model.families) {\n    if (family[\"@exclude\"] !== \"true\") {\n      if (family[\"@warning\"]) {\n        model.addUpdateWarnings(family, readWarnings);\n      }\n      if (family[\"@match\"] || family[\"@matches\"]) {\n        family[\"@matchRead\"] = readMatches[family[\"@id\"]] ? \"true\" : \"\";\n        model.addUpdateMatch(family);\n      }\n      if (family[\"@updated\"] === \"true\") {\n        family[\"@updateRead\"] = readUpdates[family[\"@id\"]] ? \"true\" : \"\";\n        model.addUpdateUpdate(family);\n      }\n    }\n  }\n}\n\nfunction setPrimary(model, id) {\n  if (id) {\n    let primary = model.personMap[id];\n    if (primary) {\n      model.primaryPerson = primary;\n    }\n  }\n}\n\nfunction setStatus(model, status) {\n  model.status = +status;\n  updateFlags(model);\n}\n\nfunction getTrueFalse(tf) {\n  tf = +tf;\n  if (tf > 0) {\n    return \"true\";\n  }\n  if (tf < 0) {\n    return \"false\";\n  }\n  return \"\";\n}\n","import { loadGedcom, loadGedcomData, modelLoaded, updateCounts } from \"@/utils/ModelLoaderUtils\";\nimport { matchesFound, matchFound, pageUpdated, setExclude, updateStatus, unmatch } from \"@/utils/WeRelateUtils\";\nimport { readGedcom, readGedcomData, WR_SERVER } from \"@/services/Server\";\nimport { WARNINGS, PEOPLE, FAMILIES, PLACES, SOURCES, MATCHES, cloneShallow } from \"@/utils/ModelUtils\";\nimport { loadParentContent } from \"@/services/ExternalInterface\";\n\nexport const state = {\n  model: {}\n};\n\nexport const mutations = {\n  GEDCOM_UPDATE_MODEL(state, model) {\n    // console.log(\"GEDCOM_UPDATE_MODEL\", model);\n    state.model = model;\n  }\n};\n\nexport const actions = {\n  async gedcomRead({ commit, dispatch, rootGetters }, id) {\n    try {\n      let xml = await readGedcom(id);\n      // console.log(\"gedcomRead success\", xml);\n      if (!xml || (xml.getAttribute(\"status\") && xml.getAttribute(\"status\") !== \"0\")) {\n        let err = xml ? xml.getAttribute(\"status\") : \"network error\";\n        console.log(\"gedcomRead status error\", err);\n        if (err === \"-6\") {\n          alert(\"Your GEDCOM is no longer available for review\");\n          loadParentContent(WR_SERVER);\n        }\n        if (err === \"-2\") {\n          alert(\"Please sign in, then re-visit this page\");\n          loadParentContent(WR_SERVER);\n        }\n        if (err === \"-3\") {\n          alert(\"You are not authorized to view this GEDCOM\");\n          loadParentContent(WR_SERVER);\n        }\n        dispatch(\"notificationsAdd\", { message: \"There was a problem reading gedcom: \" + err });\n        return null;\n      }\n      let model = loadGedcom(xml, id, rootGetters.prefsGetReadItems);\n      commit(\"GEDCOM_UPDATE_MODEL\", model);\n      return model;\n    } catch (error) {\n      console.log(\"gedcomRead error\", error);\n      dispatch(\"notificationsAdd\", error);\n    }\n  },\n  async gedcomReadData({ commit, dispatch, state, rootGetters }, id) {\n    try {\n      let xml = await readGedcomData(id);\n      // console.log(\"gedcomReadData success\", xml);\n      if (!xml || (xml.getAttribute(\"status\") && xml.getAttribute(\"status\") !== \"0\")) {\n        let err = xml ? xml.getAttribute(\"status\") : \"network error\";\n        console.log(\"gedcomReadData error\", err);\n        dispatch(\"notificationsAdd\", { message: \"There was a problem reading gedcom data: \" + err });\n        return null;\n      }\n      let model = cloneShallow(state.model);\n      loadGedcomData(model, xml);\n      // console.log(\"gedcomReadData\", xml, model);\n      modelLoaded(model, rootGetters.prefsGetReadItems);\n      commit(\"GEDCOM_UPDATE_MODEL\", model);\n      return model;\n    } catch (error) {\n      console.log(\"gedcomReadData error\", error);\n      dispatch(\"notificationsAdd\", error);\n    }\n  },\n  async gedcomSetExclude({ commit, dispatch, state }, { data, exclude }) {\n    try {\n      let model = cloneShallow(state.model);\n      await setExclude(model, data, exclude);\n      updateCounts(model);\n      commit(\"GEDCOM_UPDATE_MODEL\", model);\n      return model;\n    } catch (error) {\n      console.log(\"gedcomSetExclude error\", error);\n      dispatch(\"notificationsAdd\", error);\n    }\n  },\n  async gedcomUpdateStatus({ commit, dispatch, state }, { status, warning }) {\n    try {\n      let model = cloneShallow(state.model);\n      await updateStatus(model, status, warning);\n      updateCounts(model);\n      commit(\"GEDCOM_UPDATE_MODEL\", model);\n      return model;\n    } catch (error) {\n      console.log(\"gedcomUpdateStatus error\", error);\n      dispatch(\"notificationsAdd\", error);\n    }\n  },\n  async gedcomPageUpdated({ commit, dispatch, state }, { id }) {\n    try {\n      let model = cloneShallow(state.model);\n      await pageUpdated(model, id);\n      updateCounts(model);\n      commit(\"GEDCOM_UPDATE_MODEL\", model);\n    } catch (error) {\n      console.log(\"gedcomPageUpdated error\", error);\n      dispatch(\"notificationsAdd\", error);\n    }\n  },\n  async gedcomMatchFound({ commit, dispatch, state }, { title }) {\n    try {\n      let model = cloneShallow(state.model);\n      await matchFound(model, title);\n      updateCounts(model);\n      commit(\"GEDCOM_UPDATE_MODEL\", model);\n    } catch (error) {\n      console.log(\"gedcomMatchFound error\", error);\n      dispatch(\"notificationsAdd\", error);\n    }\n  },\n  async gedcomMatchesFound({ commit, dispatch, state }, { matchesString, merged, all }) {\n    try {\n      let model = cloneShallow(state.model);\n      await matchesFound(model, matchesString, merged, all);\n      updateCounts(model);\n      commit(\"GEDCOM_UPDATE_MODEL\", model);\n    } catch (error) {\n      console.log(\"gedcomMatchesFound error\", error);\n      dispatch(\"notificationsAdd\", error);\n    }\n  },\n  async gedcomUnmatch({ commit, dispatch, state }, { data }) {\n    try {\n      let model = cloneShallow(state.model);\n      await unmatch(model, data);\n      updateCounts(model);\n      commit(\"GEDCOM_UPDATE_MODEL\", model);\n    } catch (error) {\n      console.log(\"gedcomUnmatch error\", error);\n      dispatch(\"notificationsAdd\", error);\n    }\n  },\n  async gedcomUpdateData({ commit }, { component, data }) {\n    let model = cloneShallow(state.model);\n    if (component === WARNINGS) {\n      model.warnings[data[\"@id\"]] = data;\n    }\n    if (component === PEOPLE) {\n      model.people[data[\"@id\"]] = data;\n    }\n    if (component === FAMILIES) {\n      model.families[data[\"@id\"]] = data;\n    }\n    if (component === PLACES) {\n      model.places[data[\"@id\"]] = data;\n    }\n    if (component === SOURCES) {\n      model.sources[data[\"@id\"]] = data;\n    }\n    if (component === MATCHES) {\n      model.matches[data[\"@id\"]] = data;\n    }\n    console.log(\"gedcomUpdateModel\", model);\n    updateCounts(model);\n    commit(\"GEDCOM_UPDATE_MODEL\", model);\n  }\n};\n","export default {\n  getItem(key) {\n    return localStorage.getItem(key);\n  },\n  setItem(key, value) {\n    return localStorage.setItem(key, value);\n  }\n};\n","import LocalStorage from \"@/services/LocalStorage\";\nimport {\n  PLACES,\n  SOURCES,\n  WARNINGS,\n  MATCHES,\n  UPDATES,\n  setRead,\n  setWarningRead,\n  setMatchRead,\n  setUpdateRead\n} from \"@/utils/ModelUtils\";\n\nexport const state = {\n  prefs: {\n    readFlags: {},\n    noShowTips: {}\n  }\n};\n\nexport const mutations = {\n  PREFS_UPDATE(state, prefs) {\n    state.prefs = prefs;\n  }\n};\n\nexport const actions = {\n  prefsRead({ commit, state, dispatch }) {\n    let prefs = null;\n    try {\n      prefs = JSON.parse(LocalStorage.getItem(\"gedcom-review\"));\n    } catch (e) {\n      console.log(\"prefsRead error\", e);\n      dispatch(\"notificationsAdd\", { message: \"There was an error reading preferences: \" + e.message });\n    }\n    if (!prefs) {\n      prefs = state.prefs;\n    }\n    try {\n      let now = new Date();\n      let secondsSinceEpoch = Math.round(now.getTime() / 1000);\n      let expirationPeriod = 60 * 60 * 24 * 31; // one month\n      let cutoffTime = secondsSinceEpoch - expirationPeriod;\n      for (let key of Object.keys(prefs.readFlags)) {\n        if (prefs.readFlags[key] < cutoffTime) {\n          delete prefs.readFlags[key];\n        }\n      }\n      for (let key of Object.keys(prefs.noShowTips)) {\n        if (prefs.noShowTips[key] < cutoffTime) {\n          delete prefs.nowShowTips[key];\n        }\n      }\n      LocalStorage.setItem(\"gedcom-review\", JSON.stringify(prefs));\n      commit(\"PREFS_UPDATE\", prefs);\n    } catch (e) {\n      dispatch(\"notificationsAdd\", { message: \"There was an error updating preferences: \" + e.message });\n    }\n    return prefs;\n  },\n  prefsMarkRead({ commit, state, dispatch }, { model, data, component }) {\n    try {\n      let prefs = Object.assign({}, state.prefs);\n      let itemChanged = false;\n      if ((component === PLACES || component === SOURCES) && data[\"@read\"] !== \"true\") {\n        setRead(model, data, \"true\");\n        itemChanged = true;\n      } else if (component === WARNINGS && data[\"@warningRead\"] !== \"true\") {\n        setWarningRead(model, data, \"true\");\n        itemChanged = true;\n      } else if (component === MATCHES && data[\"@matchRead\"] !== \"true\") {\n        setMatchRead(model, data, \"true\");\n        itemChanged = true;\n      } else if (component === UPDATES && data[\"@updateRead\"] !== \"true\") {\n        setUpdateRead(model, data, \"true\");\n        itemChanged = true;\n      }\n      if (itemChanged) {\n        let key = getItemKey(model.gedcomId, component, data[\"@id\"]);\n        prefs.readFlags[key] = Math.round(new Date().getTime() / 1000);\n        dispatch(\"gedcomUpdateData\", { component, data });\n      }\n      // console.log(\"prefsMarkRead\", prefs);\n      LocalStorage.setItem(\"gedcom-review\", JSON.stringify(prefs));\n      commit(\"PREFS_UPDATE\", prefs);\n    } catch (e) {\n      dispatch(\"notificationsAdd\", { message: \"There was an error updating preferences: \" + e.message });\n    }\n  }\n};\n\nexport const getters = {\n  prefsGetReadItems: state => (gedcomId, component) => {\n    let readItems = {};\n    let searchKey = getItemKey(gedcomId, component);\n    for (let key of Object.keys(state.prefs.readFlags)) {\n      if (key.startsWith(searchKey)) {\n        key = key.substr(searchKey.length);\n        readItems[key] = true;\n      }\n    }\n    return readItems;\n  }\n};\n\nfunction getItemKey(gedcomId, component, id = \"\") {\n  return `${gedcomId}|${component}|${id}`;\n}\n","export const state = {\n  notificationsList: []\n};\n\nlet nextId = 1;\n\nexport const mutations = {\n  NOTIFICATIONS_PUSH(state, notification) {\n    state.notificationsList.push({\n      ...notification,\n      id: nextId++\n    });\n  },\n  NOTIFICATIONS_DELETE(state, id) {\n    state.notificationsList = state.notificationsList.filter(notification => notification.id !== id);\n  }\n};\nexport const actions = {\n  notificationsAdd({ commit }, notification) {\n    let message = \"\";\n    if (!notification) {\n      message = \"Unknown error\";\n    } else if (notification.message) {\n      message = notification.message;\n    } else if (notification[\"@status\"]) {\n      message = notification[\"@status\"];\n    }\n    commit(\"NOTIFICATIONS_PUSH\", { message, type: \"error\" });\n  },\n  notificationsRemove({ commit }, id) {\n    commit(\"NOTIFICATIONS_DELETE\", id);\n  }\n};\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport * as gedcom from \"./modules/gedcom\";\nimport * as prefs from \"./modules/prefs\";\nimport * as notifications from \"./modules/notifications\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  modules: {\n    gedcom,\n    prefs,\n    notifications\n  },\n  state: {},\n  mutations: {},\n  actions: {},\n  getters: {}\n});\n","<template>\n  <v-app id=\"app\">\n    <v-navigation-drawer\n      :clipped=\"true\"\n      :mini-variant=\"$vuetify.breakpoint.mdAndDown\"\n      :permanent=\"true\"\n      :width=\"180\"\n      app\n    >\n      <v-list dense>\n        <template v-for=\"item in items\">\n          <v-list-item :key=\"item.text\" :to=\"item.link\" link>\n            <v-list-item-action>\n              <v-icon :title=\"item.text\">{{ item.icon }}</v-icon>\n            </v-list-item-action>\n            <v-list-item-content>\n              <v-list-item-title>{{ item.text }}</v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n        </template>\n      </v-list>\n    </v-navigation-drawer>\n\n    <v-main>\n      <multipane class=\"horizontal-panes\" layout=\"horizontal\">\n        <div id=\"container-wrapper\" :style=\"{ minHeight: '10%', maxHeight: '90%', height: '250px' }\">\n          <Notifications />\n          <v-container>\n            <v-row>\n              <router-view id=\"view\" :key=\"$route.fullPath\"></router-view>\n            </v-row>\n          </v-container>\n        </div>\n        <multipane-resizer></multipane-resizer>\n        <div class=\"iframe-parent\" :style=\"{ minHeight: '10%', maxHeight: '90%', flexGrow: 1 }\">\n          <iframe\n            id=\"iframe\"\n            src=\"https://www.werelate.org/wiki/Help:Review_GEDCOM\"\n            frameborder=\"0\"\n            :style=\"{ flexGrow: 1 }\"\n          ></iframe>\n        </div>\n      </multipane>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nimport { Multipane, MultipaneResizer } from \"vue-multipane\";\nimport Notifications from \"@/components/Notifications.vue\";\nimport NProgress from \"nprogress\";\nimport store from \"@/store\";\n\nexport default {\n  components: {\n    Multipane,\n    MultipaneResizer,\n    Notifications\n  },\n  created() {\n    let result = window.location.href.match(/gedcomId=(\\d+)/);\n    let gedcomId = result ? result[1] : 0;\n    console.log(\"gedcomId\", gedcomId);\n    store.dispatch(\"prefsRead\").then(() => {\n      store.dispatch(\"gedcomRead\", gedcomId).then(() => {\n        store.dispatch(\"gedcomReadData\", gedcomId);\n      });\n    });\n  },\n  mounted() {\n    NProgress.configure({ parent: \"#container-wrapper\" });\n    // set up callbacks from php code\n    window.review = {\n      loadGedcomId(id) {\n        try {\n          console.log(\"loadGedcomId\", id);\n          // loadGedcomId(store.state.gedcom.model, id);\n        } catch (err) {\n          console.log(\"loadGedcomId error\", err);\n        }\n      },\n      matchFound(title) {\n        try {\n          // console.log(\"matchFound\", title);\n          store.dispatch(\"gedcomMatchFound\", { title });\n        } catch (err) {\n          console.log(\"matchFound error\", err);\n        }\n      },\n      matchesFound(matchesString, merged, all) {\n        try {\n          // console.log(\"matchesFound\", matchesString, merged, all);\n          store.dispatch(\"gedcomMatchesFound\", { matchesString, merged, all });\n        } catch (err) {\n          console.log(\"matchesFound error\", err);\n        }\n      },\n      pageUpdated(id) {\n        try {\n          // console.log(\"pageUpdated\", id);\n          store.dispatch(\"gedcomPageUpdated\", { id });\n        } catch (err) {\n          console.log(\"pageUpdated error\", err);\n        }\n      }\n    };\n  },\n  props: {\n    source: String\n  },\n  data: () => ({\n    dialog: false,\n    items: [\n      { icon: \"mdi-home\", text: \"Overview\", link: \"/\" },\n      { icon: \"mdi-alert\", text: \"Warnings\", link: \"/warnings\" },\n      { icon: \"mdi-account\", text: \"People\", link: \"/people\" },\n      { icon: \"mdi-account-group\", text: \"Families\", link: \"/families\" },\n      { icon: \"mdi-map-marker\", text: \"Places\", link: \"/places\" },\n      { icon: \"mdi-bookshelf\", text: \"Sources\", link: \"/sources\" },\n      { icon: \"mdi-link\", text: \"Matches\", link: \"/matches\" },\n      { icon: \"mdi-import\", text: \"Import\", link: \"/import\" }\n    ]\n  }),\n  computed: {\n    bottomHeight() {\n      // console.log(\"clientHeight\", document.body.clientHeight);\n      // console.log(\"scrollHeight\", document.body.scrollHeight);\n      // console.log(\"pageYOffset\", window.pageYOffset);\n      // let elm = document.getElementById(\"iframe\");\n      // console.log(\"elm\", elm);\n      // if (elm) {\n      // let distanceToTop = window.pageYOffset + elm.getBoundingClientRect().top;\n      // console.log(\"elm.top\", elm.getBoundingClientRect().top);\n      // console.log(\"distanceToTop\", distanceToTop);\n      //}\n      return 400;\n    }\n  }\n};\n</script>\n\n<style>\n#container-wrapper {\n  width: 100%;\n  overflow: auto;\n}\n#iframe {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n}\n.horizontal-panes {\n  height: 100%;\n  width: 100%;\n}\n.iframe-parent {\n  padding-top: 30px;\n}\n.multipane-resizer {\n  margin: 0;\n  top: 0; /* reset default styling */\n  height: 15px;\n  background: lightgray;\n}\n.rowHover {\n  cursor: pointer;\n}\n.v-data-table--dense .v-data-table-header {\n  background: #f1f1f1;\n  padding-top: 5px;\n}\n.columns-resize-bar {\n  border-left: solid 1px #ccc;\n  height: 100px;\n  max-height: 31px;\n}\n.errorMessage {\n  color: red;\n}\n.no-underline a {\n  text-decoration: none;\n}\n.text-first-caps {\n  text-transform: capitalize;\n}\n.smallCheckbox .v-checkbox {\n  color: #0097a7 !important;\n}\n\n.smallCheckbox i {\n  font-size: 17px !important;\n  color: #0097a7 !important;\n  margin-top: -3px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3bf07168&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VApp,VContainer,VIcon,VList,VListItem,VListItemAction,VListItemContent,VListItemTitle,VMain,VNavigationDrawer,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"overview\",attrs:{\"fluid\":\"\"}},[_c('v-row',[_c('v-col',[_c('h3',[_vm._v(\"Instructions\")])])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"offset\":\"1\"}},[_vm._v(\" \"+_vm._s(_vm.gedcom.model.nextSteps)+\" \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"3\",\"offset\":\"1\"}},[_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":_vm.returnToWeRelate}},[_vm._v(\" Return to WeRelate \")])],1),_c('v-col',[_vm._v(\" Finish your review later \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"3\",\"offset\":\"1\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"290\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({attrs:{\"small\":\"\",\"disabled\":!_vm.gedcom.model.isUpdatable}},'v-btn',attrs,false),on),[_vm._v(\" Remove this GEDCOM \")])]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\" Are you sure? \")]),_c('v-card-text',[_vm._v(\" If you remove your GEDCOM, the work you have done to prepare your GEDCOM for import will be lost. \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"text\":\"\"},on:{\"click\":_vm.removeGedcom}},[_vm._v(\" Remove \")])],1)],1)],1)],1),_c('v-col',[_vm._v(\" In case you change your mind about uploading this GEDCOM, you can remove it. \")])],1),_c('v-row',[_c('v-col',[_c('h3',[_vm._v(\"Quality\")])])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" Warning level: \")]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"percent\")(_vm.gedcom.model.warningLevel))+\" \")]),_c('v-col',[_vm._v(\" \"+_vm._s(_vm.gedcom.model.warningComment)+\" \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" Duplicates: \")]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.gedcom.model.duplicateCount)+\" \")]),_c('v-col',[_vm._v(\" \"+_vm._s(_vm.gedcom.model.duplicateComment)+\" \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" Sources: \")]),_c('v-col',[_vm._v(\" \"+_vm._s(_vm.gedcom.model.totalNonExcludedSources)+\" \")])],1),_c('v-row',[_c('v-col',[_c('h3',[_vm._v(\"Root\")])])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"offset\":\"1\"}},[_vm._v(\" \"+_vm._s(_vm.primaryPersonFullName)+\" \"+_vm._s(_vm.primaryPersonBirthDate)+\" - \"+_vm._s(_vm.primaryPersonDeathDate)+\" \")])],1),_c('v-row',[_c('v-col',[_c('h3',[_vm._v(\"Statistics\")])])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" People: \")]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.gedcom.model.peopleToImport)+\" / \"+_vm._s(_vm.gedcom.model.peopleMatched)+\" / \"+_vm._s(_vm.gedcom.model.peopleExcluded)+\" \")]),_c('v-col',[_vm._v(\" to be imported / matched / excluded \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" Families: \")]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.gedcom.model.familiesToImport)+\" / \"+_vm._s(_vm.gedcom.model.familiesMatched)+\" / \"+_vm._s(_vm.gedcom.model.familiesExcluded)+\" \")]),_c('v-col',[_vm._v(\" to be imported / matched / excluded \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" Warnings: \")]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.gedcom.model.warningsRead)+\" / \"+_vm._s(_vm.gedcom.model.warningsUnread)+\" \")]),_c('v-col',[_vm._v(\" read / unread \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" Places: \")]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.gedcom.model.placesMatched)+\" / \"+_vm._s(_vm.gedcom.model.placesUnmatched)+\" \")]),_c('v-col',[_vm._v(\" matched / not matched \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" Sources: \")]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.gedcom.model.sourcesToImport)+\" / \"+_vm._s(_vm.gedcom.model.sourcesMatched)+\" / \"+_vm._s(_vm.gedcom.model.sourcesExcluded)+\" / \"+_vm._s(_vm.gedcom.model.sourcesCitationOnly)+\" \")]),_c('v-col',[_vm._v(\" to be imported / matched / excluded / citation-only \")])],1),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"label\",attrs:{\"cols\":\"2\"}},[_vm._v(\" Family Matches: \")]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.gedcom.model.matchesMatched)+\" / \"+_vm._s(_vm.gedcom.model.matchesUnmatched)+\" / \"+_vm._s(_vm.gedcom.model.matchesUndecided)+\" \")]),_c('v-col',[_vm._v(\" matched / not matched / undecided \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid class=\"overview\">\n    <v-row>\n      <v-col>\n        <h3>Instructions</h3>\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col offset=\"1\">\n        {{ gedcom.model.nextSteps }}\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"3\" offset=\"1\">\n        <v-btn small @click=\"returnToWeRelate\">\n          Return to WeRelate\n        </v-btn>\n      </v-col>\n      <v-col>\n        Finish your review later\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"3\" offset=\"1\">\n        <v-dialog v-model=\"dialog\" persistent max-width=\"290\">\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn small v-bind=\"attrs\" v-on=\"on\" :disabled=\"!gedcom.model.isUpdatable\">\n              Remove this GEDCOM\n            </v-btn>\n          </template>\n          <v-card>\n            <v-card-title class=\"headline\">\n              Are you sure?\n            </v-card-title>\n            <v-card-text>\n              If you remove your GEDCOM, the work you have done to prepare your GEDCOM for import will be lost.\n            </v-card-text>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn color=\"green darken-1\" text @click=\"dialog = false\">\n                Cancel\n              </v-btn>\n              <v-btn color=\"green darken-1\" text @click=\"removeGedcom\">\n                Remove\n              </v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n      </v-col>\n      <v-col>\n        In case you change your mind about uploading this GEDCOM, you can remove it.\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col>\n        <h3>Quality</h3>\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        Warning level:\n      </v-col>\n      <v-col cols=\"2\">\n        {{ gedcom.model.warningLevel | percent }}\n      </v-col>\n      <v-col>\n        {{ gedcom.model.warningComment }}\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        Duplicates:\n      </v-col>\n      <v-col cols=\"2\">\n        {{ gedcom.model.duplicateCount }}\n      </v-col>\n      <v-col>\n        {{ gedcom.model.duplicateComment }}\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        Sources:\n      </v-col>\n      <v-col>\n        {{ gedcom.model.totalNonExcludedSources }}\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col>\n        <h3>Root</h3>\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col offset=\"1\">\n        {{ primaryPersonFullName }}\n        {{ primaryPersonBirthDate }} - {{ primaryPersonDeathDate }}\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col>\n        <h3>Statistics</h3>\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        People:\n      </v-col>\n      <v-col cols=\"2\">\n        {{ gedcom.model.peopleToImport }} / {{ gedcom.model.peopleMatched }} / {{ gedcom.model.peopleExcluded }}\n      </v-col>\n      <v-col>\n        to be imported / matched / excluded\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        Families:\n      </v-col>\n      <v-col cols=\"2\">\n        {{ gedcom.model.familiesToImport }} / {{ gedcom.model.familiesMatched }} / {{ gedcom.model.familiesExcluded }}\n      </v-col>\n      <v-col>\n        to be imported / matched / excluded\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        Warnings:\n      </v-col>\n      <v-col cols=\"2\"> {{ gedcom.model.warningsRead }} / {{ gedcom.model.warningsUnread }} </v-col>\n      <v-col>\n        read / unread\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        Places:\n      </v-col>\n      <v-col cols=\"2\"> {{ gedcom.model.placesMatched }} / {{ gedcom.model.placesUnmatched }} </v-col>\n      <v-col>\n        matched / not matched\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        Sources:\n      </v-col>\n      <v-col cols=\"2\">\n        {{ gedcom.model.sourcesToImport }} / {{ gedcom.model.sourcesMatched }} / {{ gedcom.model.sourcesExcluded }} /\n        {{ gedcom.model.sourcesCitationOnly }}\n      </v-col>\n      <v-col>\n        to be imported / matched / excluded / citation-only\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"2\" class=\"label\">\n        Family Matches:\n      </v-col>\n      <v-col cols=\"2\">\n        {{ gedcom.model.matchesMatched }} / {{ gedcom.model.matchesUnmatched }} / {{ gedcom.model.matchesUndecided }}\n      </v-col>\n      <v-col>\n        matched / not matched / undecided\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport { HELPPAGES, OVERVIEW, STATUS_DELETE, getPersonFullName, getEventFact } from \"@/utils/ModelUtils\";\nimport { loadPageTitle } from \"@/utils/WeRelateUtils\";\nimport { WR_SERVER } from \"@/services/Server\";\nimport { loadParentContent } from \"@/services/ExternalInterface\";\n\nexport default {\n  name: \"Overview\",\n  mounted() {\n    loadPageTitle(HELPPAGES[OVERVIEW]);\n  },\n  data() {\n    return {\n      dialog: false\n    };\n  },\n  computed: {\n    primaryPersonFullName() {\n      return getPersonFullName(this.gedcom.model.primaryPerson);\n    },\n    primaryPersonBirthDate() {\n      return (getEventFact(this.gedcom.model.primaryPerson, \"Birth\") || {})[\"@data\"];\n    },\n    primaryPersonDeathDate() {\n      return (getEventFact(this.gedcom.model.primaryPerson, \"Death\") || {})[\"@data\"];\n    },\n    ...mapState([\"gedcom\"])\n  },\n  methods: {\n    returnToWeRelate() {\n      try {\n        loadParentContent(WR_SERVER);\n      } catch (err) {\n        this.$store.dispatch(\"notificationsAdd\", err);\n      }\n    },\n    async removeGedcom() {\n      try {\n        await this.$store.dispatch(\"gedcomUpdateStatus\", { status: STATUS_DELETE });\n        loadParentContent(WR_SERVER);\n      } catch (err) {\n        await this.$store.dispatch(\"notificationsAdd\", err);\n      }\n    }\n  }\n};\n</script>\n\n<style>\n.label {\n  text-align: right;\n  font-weight: bold;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Overview.vue?vue&type=template&id=61361c24&\"\nimport script from \"./Overview.vue?vue&type=script&lang=js&\"\nexport * from \"./Overview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Overview.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VRow,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"Oops!\")]),_c('h3',[_vm._v(\"The \"+_vm._s(_vm.resource)+\" you're looking for is not here.\")]),_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Back to the home page\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h1>Oops!</h1>\n    <h3>The {{ resource }} you're looking for is not here.</h3>\n    <router-link to=\"/\">Back to the home page</router-link>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    resource: {\n      type: String,\n      required: true\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotFound.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotFound.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NotFound.vue?vue&type=template&id=23068362&\"\nimport script from \"./NotFound.vue?vue&type=script&lang=js&\"\nexport * from \"./NotFound.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"Uh-Oh!\")]),_c('h3',[_vm._v(\" It looks like you're experiencing some network issues, please click the back button and try again. \")]),_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Or go back to the home page\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./NetworkIssue.vue?vue&type=template&id=7917f86e&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport NProgress from \"nprogress\";\nimport Overview from \"../views/Overview.vue\";\nimport NotFound from \"../views/NotFound.vue\";\nimport NetworkIssue from \"../views/NetworkIssue.vue\";\n\nVue.use(VueRouter);\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"overview\",\n    component: Overview\n  },\n  {\n    path: \"/warnings\",\n    name: \"warnings\",\n    component: () => import(/* webpackChunkName: \"about\" */ \"../views/Warnings.vue\")\n  },\n  {\n    path: \"/people\",\n    name: \"people\",\n    component: () => import(/* webpackChunkName: \"about\" */ \"../views/People.vue\")\n  },\n  {\n    path: \"/families\",\n    name: \"families\",\n    component: () => import(/* webpackChunkName: \"about\" */ \"../views/Families.vue\")\n  },\n  {\n    path: \"/places\",\n    name: \"places\",\n    component: () => import(/* webpackChunkName: \"about\" */ \"../views/Places.vue\")\n  },\n  {\n    path: \"/sources\",\n    name: \"sources\",\n    component: () => import(/* webpackChunkName: \"about\" */ \"../views/Sources.vue\")\n  },\n  {\n    path: \"/matches\",\n    name: \"matches\",\n    component: () => import(/* webpackChunkName: \"about\" */ \"../views/Matches.vue\")\n  },\n  {\n    path: \"/import\",\n    name: \"import\",\n    meta: { requiresAuth: true },\n    component: () => import(/* webpackChunkName: \"about\" */ \"../views/Import.vue\")\n  },\n  {\n    path: \"/404\",\n    name: \"404\",\n    component: NotFound,\n    props: true\n  },\n  {\n    path: \"/network-issue\",\n    name: \"network-issue\",\n    component: NetworkIssue\n  },\n  {\n    path: \"*\",\n    redirect: { name: \"404\", params: { resource: \"page\" } }\n  }\n];\n\nconst router = new VueRouter({\n  mode: \"hash\",\n  routes\n});\n\nrouter.beforeEach((routeTo, routeFrom, next) => {\n  NProgress.start();\n  next();\n});\n\nrouter.afterEach(() => {\n  NProgress.done();\n});\n\nexport default router;\n","import Vue from \"vue\";\nimport Vuetify, { colors } from \"vuetify/lib\";\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n  theme: {\n    themes: {\n      light: {\n        primary: colors.cyan.darken2,\n        secondary: colors.cyan.lighten4,\n        accent: colors.orange.darken3,\n        error: \"#b71c1c\"\n      }\n    }\n  }\n});\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport \"nprogress/nprogress.css\";\nimport Vuelidate from \"vuelidate\";\nimport vuetify from \"./plugins/vuetify\";\nimport VueColumnsResizableVuetify from \"vue-columns-resizable-vuetify\";\n\nVue.use(Vuelidate);\nVue.use(VueColumnsResizableVuetify);\n\nVue.config.productionTip = false;\n\nconst requireComponent = require.context(\"./components\", false, /Base[A-Z]\\w+\\.(vue|js)$/);\n\nrequireComponent.keys().forEach(fileName => {\n  const componentConfig = requireComponent(fileName);\n  // const componentName = upperFirst(\n  //     camelCase(fileName.replace(/^\\.\\/(.*)\\.\\w+$/, '$1'))\n  // )\n  const componentName = fileName.replace(/^\\.\\/(.*)\\.\\w+$/, \"$1\");\n  Vue.component(componentName, componentConfig.default || componentConfig);\n});\n\nVue.filter(\"formatSize\", function(size) {\n  if (size > 1024 * 1024 * 1024 * 1024) {\n    return (size / 1024 / 1024 / 1024 / 1024).toFixed(2) + \" TB\";\n  } else if (size > 1024 * 1024 * 1024) {\n    return (size / 1024 / 1024 / 1024).toFixed(2) + \" GB\";\n  } else if (size > 1024 * 1024) {\n    return (size / 1024 / 1024).toFixed(2) + \" MB\";\n  } else if (size > 1024) {\n    return (size / 1024).toFixed(2) + \" KB\";\n  }\n  return size.toString() + \" B\";\n});\n\nVue.filter(\"percent\", function(pct) {\n  return pct + \"%\";\n});\n\nnew Vue({\n  router,\n  store,\n  vuetify,\n  render: h => h(App)\n}).$mount(\"#app\");\n","import { NS_PERSON, NS_FAMILY, NOT_CONNECTED, MAX_PEOPLE, getReferences } from \"@/utils/ModelUtils\";\n\nexport function updateRootDistances(model) {\n  for (let person of model.people) {\n    person[\"@distance\"] = NOT_CONNECTED;\n  }\n  for (let family of model.families) {\n    family[\"@distance\"] = NOT_CONNECTED;\n  }\n  if (model.primaryPerson !== null && model.people.length <= MAX_PEOPLE) {\n    model.primaryPerson[\"@distance\"] = 0;\n    updateRelatedDistanceInclude(model, model.primaryPerson, null);\n  }\n}\n\nexport function includeItem(model, data, includedItems) {\n  data[\"@exclude\"] = \"false\";\n  includedItems.push(data);\n  if (+data[\"@ns\"] === NS_PERSON || +data[\"@ns\"] === NS_FAMILY) {\n    // include excluded sources referenced by this page\n    for (let sc of data[\"source_citation\"] || []) {\n      let sourceId = sc[\"@source_id\"];\n      if (sourceId) {\n        let page = model.sourceMap[sourceId];\n        if (page && page[\"@exclude\"] === \"true\") {\n          includeItem(model, page, includedItems);\n        }\n      }\n    }\n  }\n  if ((+data[\"@ns\"] === NS_PERSON || +data[\"@ns\"] === NS_FAMILY) && model.people.length <= MAX_PEOPLE) {\n    data[\"@distance\"] = getMinDistance(model, data);\n    if (data[\"@distance\"] !== NOT_CONNECTED) {\n      updateRelatedDistanceInclude(model, data, includedItems);\n    }\n  }\n  if (+data[\"@ns\"] === NS_PERSON) {\n    includeRelatedFamilies(model, data, includedItems);\n  }\n}\n\nexport function excludeItem(model, data, excludedItems) {\n  data[\"@exclude\"] = \"true\";\n  excludedItems.push(data);\n  if (+data[\"@ns\"] === NS_PERSON || +data[\"@ns\"] === NS_FAMILY) {\n    // excluded sources referenced only by this page\n    for (let sc of data[\"source_citation\"] || []) {\n      let sourceId = sc[\"@source_id\"];\n      if (sourceId) {\n        let page = model.sourceMap[sourceId];\n        if (page) {\n          let found = false;\n          for (let pf of getReferences(model, page)) {\n            if (pf[\"@exclude\"] !== \"true\") {\n              found = true;\n              break;\n            }\n          }\n          if (!found) {\n            excludeItem(model, page, excludedItems);\n          }\n        }\n      }\n    }\n  }\n  if (data[\"@ns\"] === NS_PERSON) {\n    excludeRelatedFamilies(model, data, excludedItems);\n  }\n}\n\nfunction getRefDistance(model, id, ns) {\n  let data = getPersonFamilyData(model, id, ns);\n  return data ? data[\"@distance\"] : NOT_CONNECTED;\n}\n\n// get distance for id by looking at immediate relatives\nfunction getMinDistance(model, data) {\n  if (data[\"@distance\"] === 0) return 0; // root\n  let dist = NOT_CONNECTED;\n  if (+data[\"@ns\"] === NS_PERSON) {\n    for (let relRef of data[\"child_of_family\"] || []) {\n      dist = Math.min(dist, getRefDistance(model, relRef[\"@id\"], NS_FAMILY));\n    }\n    for (let relRef of data[\"spouse_of_family\"] || []) {\n      dist = Math.min(dist, getRefDistance(model, relRef[\"@id\"], NS_FAMILY));\n    }\n  } else {\n    for (let relRef of data[\"husband\"] || []) {\n      dist = Math.min(dist, getRefDistance(model, relRef[\"@id\"], NS_PERSON));\n    }\n    for (let relRef of data[\"wife\"] || []) {\n      dist = Math.min(dist, getRefDistance(model, relRef[\"@id\"], NS_PERSON));\n    }\n    for (let relRef of data[\"child\"] || []) {\n      dist = Math.min(dist, getRefDistance(model, relRef[\"@id\"], NS_PERSON));\n    }\n  }\n  if (dist !== NOT_CONNECTED) dist = dist + 1;\n  return dist;\n}\n\nfunction updateRelatedDistanceIncludeRelative(model, id, ns, includedItems, dist) {\n  let relative = getPersonFamilyData(model, id, ns);\n  if (relative) {\n    if (relative[\"@distance\"] > dist + 1) {\n      // && relative.@exclude != \"true\") {\n      relative[\"@distance\"] = dist + 1;\n      updateRelatedDistanceInclude(model, relative, includedItems);\n    }\n  }\n}\n\nfunction updateRelatedDistanceInclude(model, data, includedItems) {\n  let dist = data[\"@distance\"];\n  if (+data[\"@ns\"] === NS_PERSON) {\n    for (let ref of data[\"child_of_family\"] || [])\n      updateRelatedDistanceIncludeRelative(model, ref[\"@id\"], NS_FAMILY, includedItems, dist);\n    for (let ref of data[\"spouse_of_family\"] || [])\n      updateRelatedDistanceIncludeRelative(model, ref[\"@id\"], NS_FAMILY, includedItems, dist);\n  } else {\n    for (let ref of data[\"husband\"] || [])\n      updateRelatedDistanceIncludeRelative(model, ref[\"@id\"], NS_PERSON, includedItems, dist);\n    for (let ref of data[\"wife\"] || [])\n      updateRelatedDistanceIncludeRelative(model, ref[\"@id\"], NS_PERSON, includedItems, dist);\n    for (let ref of data[\"child\"] || [])\n      updateRelatedDistanceIncludeRelative(model, ref[\"@id\"], NS_PERSON, includedItems, dist);\n  }\n}\n\nfunction isExcluded(model, id, ns) {\n  let data = getPersonFamilyData(model, id, ns);\n  return data[\"@exclude\"] === \"true\";\n}\n\nfunction countIncludedFamilyMembers(model, data) {\n  let includedMembers = 0;\n  for (let ref of data[\"husband\"] || []) if (!isExcluded(model, ref[\"@id\"], NS_PERSON)) includedMembers++;\n  for (let ref of data[\"wife\"] || []) if (!isExcluded(model, ref[\"@id\"], NS_PERSON)) includedMembers++;\n  for (let ref of data[\"child\"] || []) if (!isExcluded(model, ref[\"@id\"], NS_PERSON)) includedMembers++;\n  return includedMembers;\n}\n\nfunction testIncludeFamily(model, id, includedItems) {\n  let data = getPersonFamilyData(model, id, NS_FAMILY);\n  if (data && data[\"@exclude\"] === \"true\") {\n    if (countIncludedFamilyMembers(model, data) > 1) {\n      includeItem(model, data, includedItems);\n    }\n  }\n}\n\nfunction includeRelatedFamilies(model, data, includedItems) {\n  for (let ref of data[\"child_of_family\"] || []) testIncludeFamily(model, ref[\"@id\"], includedItems);\n  for (let ref of data[\"spouse_of_family\"] || []) testIncludeFamily(model, ref[\"@id\"], includedItems);\n}\n\nfunction updateRelatedDistanceExcludeRelative(model, id, ns) {\n  let relative = getPersonFamilyData(model, id, ns);\n  if (relative && relative[\"@exclude\"] !== \"true\") {\n    if (relative[\"@distance\"] < getMinDistance(model, relative)) {\n      //relative.@distance = ModelUtils.NOT_CONNECTED; // assume not connected anymore\n      updateRelatedDistanceExclude(model, relative);\n    }\n  }\n}\n\nfunction updateRelatedDistanceExclude(model, data) {\n  if (data[\"@ns\"] === NS_PERSON) {\n    for (let ref of data[\"child_of_family\"] || []) updateRelatedDistanceExcludeRelative(model, ref[\"@id\"], NS_FAMILY);\n    for (let ref of data[\"spouse_of_family\"] || []) updateRelatedDistanceExcludeRelative(model, ref[\"@id\"], NS_FAMILY);\n  } else {\n    for (let ref of data[\"husband\"] || []) updateRelatedDistanceExcludeRelative(model, ref[\"@id\"], NS_PERSON);\n    for (let ref of data[\"wife\"] || []) updateRelatedDistanceExcludeRelative(model, ref[\"@id\"], NS_PERSON);\n    for (let ref of data[\"child\"] || []) updateRelatedDistanceExcludeRelative(model, ref[\"@id\"], NS_PERSON);\n  }\n}\n\nfunction testExcludeFamily(model, id, excludedItems) {\n  let data = getPersonFamilyData(model, id, NS_FAMILY);\n  if (data && data[\"@exclude\"] !== \"true\") {\n    if (countIncludedFamilyMembers(model, data) <= 1) {\n      excludeItem(model, data, excludedItems);\n    }\n  }\n}\n\nfunction excludeRelatedFamilies(model, data, excludedItems) {\n  for (let ref of data[\"child_of_family\"] || []) testExcludeFamily(model, ref[\"@id\"], excludedItems);\n  for (let ref of data[\"spouse_of_family\"] || []) testExcludeFamily(model, ref[\"@id\"], excludedItems);\n}\n\nfunction getPersonFamilyData(model, id, ns) {\n  return ns === NS_PERSON ? model.personMap[id] : model.familyMap[id];\n}\n","// let currURL = \"\";\n// let isChangingURL = false;\n// let inCriticalSection = false;\n\nexport function loadContent(url) {\n  // inCriticalSection = true;\n  document.getElementById(\"iframe\").src = url;\n  // currURL = url;\n  // isChangingURL = currURL !== parent.content.location.href;\n  // inCriticalSection = false;\n}\n\nexport function loadParentContent(url) {\n  window.location.href = url;\n}\n\nexport function loadContentNewWindow(url) {\n  window.open(\n    url,\n    \"\",\n    \"height=600,width=700,scrollbars=yes,resizable=yes,toolbar=yes,menubar=no,location=no,directories=no\"\n  );\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overview.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overview.vue?vue&type=style&index=0&lang=css&\"","import {\n  NS_FAMILY,\n  NS_PERSON,\n  NAMESPACES,\n  NS_MYSOURCE,\n  NS_PLACE,\n  NS_SOURCE,\n  MATCHES,\n  NOMATCH,\n  PEOPLE,\n  FAMILIES,\n  SOURCES,\n  WARNINGS,\n  PLACES,\n  NOT_MATCHABLE_PAGE,\n  STATUS_HOLD,\n  HELPPAGES,\n  NAME_MATCH_THRESHOLD,\n  getGedcomPageTitle,\n  getDefaultComponent,\n  itemUpdated,\n  getDataComponent,\n  getEventFact,\n  getPrefixedTitle,\n  getReferences,\n  preparePageData,\n  setMatchHelperFields,\n  updateData,\n  getUnprefixedTitle,\n  getWarningPersonFamily,\n  getFullName\n} from \"@/utils/ModelUtils\";\nimport {\n  saveMatchedFamily,\n  sendPageData,\n  updateGedcomFlag,\n  readGedcomPageData,\n  saveMatchesToServer,\n  savePotentialMatches,\n  updateGedcomStatus\n} from \"@/services/Server\";\nimport { encodeWikiURIComponent, objectToQuery, similarity } from \"@/utils/StringUtils\";\nimport { loadContent, loadContentNewWindow } from \"@/services/ExternalInterface\";\nimport { excludeItem, includeItem } from \"@/utils/IncludeExclude\";\nimport { xmlToJson } from \"@/utils/XMLUtils\";\n\nconst RESULT_NOMATCH = 0;\nconst RESULT_MATCH = 1;\nconst RESULT_MERGE = 2;\n\nlet sentData = null;\n\n// async function unlinkItem(model, data) {\n//   if (+data[\"@ns\"] === NS_PERSON) {\n//     await setMatch(model, data, \"\");\n//   } else {\n//     // TODO\n//     // uc.show(data);\n//   }\n// }\n\nexport function visitUserTalk(model) {\n  loadPageTitle(\"User talk:\" + model.userName);\n}\n\nexport async function fetchItem(model, data, component) {\n  if (data) {\n    if (component === PEOPLE || component === FAMILIES) {\n      await fetchGedcomItem(model, data);\n    } else if (component === SOURCES) {\n      if (!model.isMatchable) {\n        loadPageTitle(NOT_MATCHABLE_PAGE);\n      } else if (data[\"@match\"]) {\n        fetchWeRelateItem(data);\n      } else {\n        await fetchGedcomItem(model, data);\n      }\n    } else if (component === WARNINGS) {\n      await fetchGedcomItem(model, getWarningPersonFamily(data));\n    } else if (component === PLACES) {\n      if (!model.isMatchable) {\n        loadPageTitle(NOT_MATCHABLE_PAGE);\n      } else if (data[\"@match\"]) {\n        fetchWeRelateItem(data);\n      } else {\n        await findAddItem(model, data, component);\n      }\n    } else {\n      // MATCHES\n      if (!model.isMatchable) {\n        loadPageTitle(NOT_MATCHABLE_PAGE);\n      } else if (data[\"@match\"]) {\n        if (model.isMergeable && data[\"@merged\"] !== \"true\") {\n          await mergeItem(model, data);\n        } else {\n          fetchWeRelateItem(data);\n        }\n      } else if (data[\"@matches\"]) {\n        await compareItem(model, data);\n      } else {\n        // should never happen\n        await findAddItem(model, data, component);\n      }\n    }\n  } else if (model.status === STATUS_HOLD && component === 1) {\n    visitUserTalk();\n  } else {\n    loadPageTitle(HELPPAGES[component]);\n  }\n}\n\nexport function loadPageTitle(pageTitle, parms = null, newWindow = false) {\n  let url = \"\"; // \"https://\" + WR_SERVER;\n  if (parms) {\n    url += \"/w/index.php?title=\" + encodeWikiURIComponent(pageTitle) + \"&\" + objectToQuery(parms);\n  } else {\n    url += \"/wiki/\" + encodeWikiURIComponent(pageTitle);\n  }\n  if (newWindow) {\n    loadContentNewWindow(url);\n  } else {\n    loadContent(url);\n  }\n}\n\n// function loadGedcomId(model, id) {\n//   let dataComponent = getDataComponent(model, id);\n//   if (dataComponent != null) {\n//     // set selected tab and item\n//     Utils.dispatchDynamicEvent(\"gedcom:setSelectedItem\", {\n//       data: dataComponent.data,\n//       component: dataComponent.component\n//     });\n//     // select item\n//     selectedItemUpdated(dataComponent.data, dataComponent.component);\n//     fetchItem(dataComponent.data, dataComponent.component);\n//   }\n// }\n\nexport async function pageUpdated(model, id) {\n  let result = await readGedcomPageData(model.gedcomId, id);\n  result = xmlToJson(result);\n  if (result && result[\"@status\"] === \"0\") {\n    let dataComponent = getDataComponent(model, result[\"@key\"]);\n    if (dataComponent && result[\"#text\"]) {\n      // get old mysource refs\n      let oldMySources = getMySourceCitationIds(dataComponent.data);\n      // update\n      updateData(model, dataComponent.data, result[\"#text\"]);\n      // did the update make the person non-living?\n      let deathDate = (getEventFact(dataComponent.data, \"Death\") || {})[\"@date\"];\n      let deathPlace = (getEventFact(dataComponent.data, \"Death\") || {})[\"@place\"];\n      let burialDate = (getEventFact(dataComponent.data, \"Burial\") || {})[\"@date\"];\n      let burialPlace = (getEventFact(dataComponent.data, \"Burial\") || {})[\"@place\"];\n      if (\n        dataComponent.data[\"@living\"] === \"true\" &&\n        (isNonLiving(deathDate) || isNonLiving(deathPlace) || isNonLiving(burialDate) || isNonLiving(burialPlace))\n      ) {\n        await setLiving(model, dataComponent.data, \"false\");\n      }\n\n      dataComponent.data[\"@edited\"] = \"true\";\n      // get new mysource refs\n      let newMySources = getMySourceCitationIds(dataComponent.data);\n      await updateMySourceInclusion(model, oldMySources, newMySources);\n    }\n  } else {\n    console.log(\"pageUpdated error\", result);\n    throw result;\n  }\n}\n\nexport async function updateStatus(model, status, warning) {\n  let result = await updateGedcomStatus(model.gedcomId, status, warning);\n  result = xmlToJson(result);\n  if (!result || result[\"@status\"] !== \"0\") {\n    console.log(\"gedcomUpdateStatus error\", result);\n    throw result;\n  }\n  model.status = status;\n}\n\nexport async function matchFound(model, title) {\n  await setMatch(model, sentData, title);\n}\n\nexport async function matchesFound(model, matchesString, merged, all) {\n  matchesString = matchesString.trim();\n  if (matchesString.length > 0) {\n    let matches = matchesString.split(\"\\n\");\n    let datas = [];\n    let titles = [];\n    for (let match of matches) {\n      let success = false;\n      let fields = match.split(\"|\", 2);\n      if (fields.length === 2) {\n        let title = fields[0];\n        let dataComponent = getDataComponent(model, fields[1]);\n        if (title && dataComponent) {\n          let data = dataComponent.data;\n          datas.push(data);\n          titles.push(title);\n          success = true;\n        }\n      }\n      if (!success) {\n        throw { message: 'Invalid match: please contact dallan@werelate.org\", \"Unable to process match' };\n      }\n    }\n    if (datas.length > 0) {\n      await setMatches(model, datas, titles, true, merged, all ? matchRelatedMatches : addRelatedMatches);\n    }\n  } else {\n    // got a nomatch\n    await setMatch(model, sentData, \"\"); // clear potential matches\n    await fetchMatchedItem(model, sentData, RESULT_NOMATCH);\n  }\n}\n\nexport async function setExclude(model, data, exclude) {\n  let updatedItems = [];\n  if (exclude === \"true\") {\n    excludeItem(model, data, updatedItems);\n  } else {\n    includeItem(model, data, updatedItems);\n  }\n  let saveKeys = [];\n  for (let item of updatedItems) {\n    itemUpdated(model, item);\n    saveKeys.push(item[\"@id\"]);\n  }\n  if (saveKeys.length > 0) {\n    await saveExclude(model, exclude, saveKeys);\n  }\n}\n\nexport async function unmatch(model, data) {\n  if (+data[\"@ns\"] === NS_FAMILY) {\n    let datas = [model.familyMap[data[\"@id\"]]];\n    let titles = [\"\"];\n    for (let ref of data[\"husband\"] || []) {\n      let member = model.personMap[ref[\"@id\"]];\n      datas.push(member);\n      titles.push(\"\");\n    }\n    for (let ref of data[\"wife\"] || []) {\n      let member = model.personMap[ref[\"@id\"]];\n      datas.push(member);\n      titles.push(\"\");\n    }\n    for (let ref of data[\"child\"] || []) {\n      let member = model.personMap[ref[\"@id\"]];\n      datas.push(member);\n      titles.push(\"\");\n    }\n    await setMatches(model, datas, titles);\n  } else {\n    await setMatch(model, data, \"\");\n  }\n}\n\n//\n// local functions\n//\n\nfunction isNonLiving(s) {\n  return s && s.length > 0 && s.toLowerCase() !== \"living\" && s.toLowerCase() !== \"private\";\n}\n\nasync function addRelatedMatches(model, merged, matchedFamilies, matchedTitles) {\n  await fetchMatchedItem(model, sentData, merged ? RESULT_MERGE : RESULT_MATCH);\n  if (matchedFamilies.length > 0) {\n    await setPotentialMatches(model, matchedFamilies, matchedTitles);\n  }\n}\n\nasync function matchRelatedMatches(model, merged, matchedFamilies, matchedTitles) {\n  await fetchMatchedItem(model, sentData, merged ? RESULT_MERGE : RESULT_MATCH);\n\n  let familyMatches = [];\n  for (let i = 0; i < matchedTitles.length; i++) {\n    familyMatches.push(getFamilyMatch(matchedFamilies[i], matchedTitles[i]));\n  }\n  await startMatching(model, familyMatches);\n}\n\nasync function setMatch(model, data, title, save = true, merged = false) {\n  let datas = [];\n  datas.push(data);\n  let titles = [];\n  titles.push(title);\n  await setMatches(model, datas, titles, save, merged);\n}\n\nasync function setMatches(model, datas, titles, save = true, merged = false, handleRelatedMatches = null) {\n  let matchIds = [];\n  let mergeIds = [];\n  let toBeMerged = [];\n  let prefixedTitles = [];\n  let mergedTF = merged ? \"true\" : \"false\";\n  for (let i = 0; i < datas.length; i++) {\n    let matchDiffers = datas[i][\"@match\"] !== titles[i];\n    datas[i][\"@match\"] = titles[i];\n    let mergeDiffers = datas[i][\"@merged\"] !== mergedTF;\n    // if matching the same title and already merged, keep merged\n    if (titles[i] && !matchDiffers && datas[i][\"@merged\"] === \"true\" && !merged) {\n      mergeDiffers = false;\n    } else {\n      datas[i][\"@merged\"] = mergedTF;\n    }\n    if (!titles[i]) {\n      datas[i][\"@nomatch\"] = \"true\";\n      datas[i][\"@matches\"] = datas[i][\"@gedcomMatches\"]; // reset title also resets pot matches to original matches\n    } else {\n      datas[i][\"@nomatch\"] = \"\";\n    }\n    setMatchHelperFields(datas[i]);\n    itemUpdated(model, datas[i]);\n    if (save) {\n      // if !merged, we want to push up all titles, even pre-matched/merged titles,\n      // so we get relatives back for handleRelatedMatches\n      if (matchDiffers || !merged) {\n        if (!titles[i]) {\n          prefixedTitles.push(NOMATCH);\n        } else {\n          // !!! hack - shouldn\"t assume that all MySource matches are Source\"s\n          prefixedTitles.push(\n            getPrefixedTitle(+datas[i][\"@ns\"] === NS_MYSOURCE ? NS_SOURCE : datas[i][\"@ns\"], titles[i])\n          );\n        }\n        matchIds.push(datas[i][\"@id\"]);\n        toBeMerged.push(datas[i][\"@merged\"]);\n      } else if (mergeDiffers) {\n        mergeIds.push(datas[i][\"@id\"]);\n      }\n    }\n  }\n  if (save) {\n    if (mergeIds.length > 0) {\n      await saveMerged(model, mergedTF, mergeIds);\n    }\n    if (matchIds.length > 0) {\n      await saveMatches(model, merged, prefixedTitles, toBeMerged, matchIds, handleRelatedMatches);\n    } else {\n      await handleRelatedMatches(model, merged, [], []);\n    }\n  }\n}\n\nasync function saveFlag(model, attr, value, keys) {\n  let result = await updateGedcomFlag(model.gedcomId, attr, value, keys);\n  result = xmlToJson(result);\n  if (!result || result[\"@status\"] !== \"0\") {\n    console.log(\"saveFlag error\", result);\n    throw result;\n  }\n}\n\nasync function saveExclude(model, tf, ids) {\n  await saveFlag(model, \"exclude\", getPositiveNegative(tf), ids);\n}\n\nasync function saveLiving(model, tf, ids) {\n  await saveFlag(model, \"living\", getPositiveNegative(tf), ids);\n}\n\nasync function setLiving(model, data, living) {\n  data[\"@living\"] = living;\n  itemUpdated(model, data);\n  await saveLiving(model, data[\"@living\"], data[\"@id\"]);\n  if (+data[\"@ns\"] === NS_PERSON) {\n    for (let ref of data[\"spouse_of_family\"]) {\n      let family = model.familyMap[ref[\"@id\"]];\n      if (family) {\n        let familyIsLiving = \"false\";\n        for (let spouseRef of family[\"husband\"]) {\n          let spouse = model.personMap[spouseRef[\"@id\"]];\n          if (spouse && spouse[\"@living\"] === \"true\") familyIsLiving = \"true\";\n        }\n        for (let spouseRef of family[\"wife\"]) {\n          let spouse = model.personMap[spouseRef[\"@id\"]];\n          if (spouse && spouse[\"@living\"] === \"true\") familyIsLiving = \"true\";\n        }\n        if (family[\"@living\"] !== familyIsLiving) {\n          await setLiving(model, family, familyIsLiving);\n        }\n      }\n    }\n  }\n}\n\nasync function saveMerged(model, tf, ids) {\n  await saveFlag(model, \"merged\", getPositiveNegative(tf), ids);\n}\n\n// gets potential matches back and saves them\nasync function saveMatches(model, merged, prefixedTitles, mergedIds, keys, handleRelatedMatches) {\n  let result = await saveMatchesToServer(model.gedcomId, prefixedTitles, mergedIds, keys);\n  result = xmlToJson(result);\n  if (!result || result[\"@status\"] !== \"0\") {\n    console.log(\"saveMatches error\", result);\n    throw result;\n  } else {\n    // process match results\n    let matchedTitles = [];\n    let matchedFamilies = [];\n    for (let match of result[\"match\"] || []) {\n      let id = match[\"@id\"];\n      let dataComponent = getDataComponent(model, id);\n      if (dataComponent && dataComponent.component === PEOPLE) {\n        matchRelatedFamilies(model, dataComponent.data, match, NAME_MATCH_THRESHOLD, matchedFamilies, matchedTitles);\n      }\n    }\n    if (handleRelatedMatches) {\n      await handleRelatedMatches(model, merged, matchedFamilies, matchedTitles);\n    }\n  }\n}\n\n// async function setPotentialMatch(model, data, title, save = true) {\n//   let datas = [];\n//   datas.push(data);\n//   let titles = [];\n//   titles.push(title);\n//   await setPotentialMatches(model, datas, titles, save);\n// }\n\nasync function setPotentialMatches(model, datas, titles, save = true) {\n  let ids = [];\n  for (let i = 0; i < datas.length; i++) {\n    datas[i][\"@matches\"] = titles[i].length > 0 ? titles[i] : datas[i][\"@gedcomMatches\"];\n    setMatchHelperFields(datas[i]);\n    itemUpdated(model, datas[i]);\n    if (save) {\n      ids[i] = datas[i][\"@id\"];\n    }\n  }\n  if (save) {\n    let result = await savePotentialMatches(model.gedcomId, titles, ids);\n    result = xmlToJson(result);\n    if (!result || result[\"@status\"] !== \"0\") {\n      console.log(\"setPotentialMatches error\", result);\n      throw result;\n    }\n  }\n}\n\nfunction getFamilyMatch(data, title) {\n  return title + \"|\" + data[\"@id\"];\n}\n\nasync function matchFamily(model, familyMatches, family, title) {\n  let matchData = prepareFindAddData(model, family);\n  matchData[\"@match\"] = title;\n  matchData[\"@id\"] = family[\"@id\"];\n  let result = await saveMatchedFamily(matchData);\n  result = xmlToJson(result);\n  if (!result || result[\"@status\"] !== \"0\") {\n    console.log(\"matchFamily error\", result);\n    throw result;\n  }\n  let matchedFamilies = [];\n  let matchedFamilyTitles = [];\n  let matchedPF = [];\n  let unmatchedPF = [];\n  let matchedPFTitles = [];\n  let unmatchedPFTitles = [];\n  for (let match of result.match) {\n    let id = match[\"@id\"];\n    let dataComponent = getDataComponent(model, id);\n    let pf = dataComponent.data;\n    // set match or potential matches\n    if (match[\"@match\"]) {\n      matchedPF.push(pf);\n      matchedPFTitles.push(getUnprefixedTitle(match[\"@match\"]));\n      // for matching people, read relatives + get related families\n      if (dataComponent.component === PEOPLE) {\n        matchRelatedFamilies(model, pf, match, NAME_MATCH_THRESHOLD, matchedFamilies, matchedFamilyTitles);\n      }\n    } else if (match[\"@matches\"]) {\n      unmatchedPF.push(pf);\n      unmatchedPFTitles.push(match[\"@matches\"]);\n    }\n  }\n  // set match or potential matches\n  if (matchedPF.length > 0) {\n    await setMatches(matchedPF, matchedPFTitles, false);\n  }\n  if (unmatchedPF.length > 0) {\n    await setPotentialMatches(unmatchedPF, unmatchedPFTitles, false);\n  }\n\n  // post related families on stack\n  for (let i = 0; i < matchedFamilies.length; i++) {\n    familyMatches.push(getFamilyMatch(matchedFamilies[i], matchedFamilyTitles[i]));\n  }\n}\n\nasync function startMatching(model, familyMatches) {\n  while (familyMatches.length > 0) {\n    let match = familyMatches.pop();\n    let fields = match.split(\"|\", 2);\n    let title = fields[0];\n    let family = model.familyMap[fields[1]];\n    if (family[\"@exclude\"] !== \"true\" && family[\"@living\"] !== \"true\" && !family[\"@match\"]) {\n      await matchFamily(model, familyMatches, family, title);\n    }\n  }\n}\n\nasync function updateMySourceInclusion(model, oldMySources, newMySources) {\n  // for each added mysource ref, make sure it's included\n  for (let id of newMySources) {\n    if (!oldMySources.contains(id)) {\n      let ms = model.sourceMap[id];\n      if (ms && ms[\"@exclude\"] === \"true\") {\n        // include ms\n        await setExclude(model, ms, \"false\");\n      }\n    }\n  }\n  // for each removed mysource ref, exclude it if no other refs\n  for (let id of oldMySources) {\n    if (!newMySources.contains(id)) {\n      let ms = model.sourceMap[id];\n      if (ms && ms[\"@exclude\"] !== \"true\" && getReferences(model, ms).length === 0) {\n        // exclude ms\n        await setExclude(model, ms, \"true\");\n      }\n    }\n  }\n}\n\n// remove beginning and trailing , spaces\nfunction trimPlace(s) {\n  return s.replace(/^[ ,]+|[ ,]+$/g, \"\");\n}\n\nfunction getPlaceNameLocatedIn(data) {\n  let place = trimPlace(data[\"@text\"]);\n  let locatedIn = \"\";\n  let pos = place.indexOf(\",\");\n  if (pos > 0) {\n    locatedIn = trimPlace(place.substr(pos + 1));\n    place = trimPlace(place.substr(0, pos));\n  }\n  return [place, locatedIn];\n}\n\nasync function findAddItem(model, data, component) {\n  if (!model.isUpdatable) {\n    return false;\n  }\n  sentData = data;\n  if (+data[\"@ns\"] === NS_FAMILY || +data[\"@ns\"] === NS_PERSON) {\n    let findAddData = prepareFindAddData(model, data);\n    let result = await sendPageData(findAddData);\n    result = xmlToJson(result);\n    if (result && result[\"@status\"] === \"0\") {\n      let parms = {};\n      parms.ns = NAMESPACES[+data[\"@ns\"]];\n      parms.match = \"on\";\n      parms.pagetitle = getGedcomPageTitle(model, data);\n      parms.gedcomtab = getDefaultComponent(+data[\"@ns\"]);\n      parms.gedcomkey = data[\"@id\"];\n      loadPageTitle(\"Special:Search\", parms);\n    } else {\n      console.log(\"findAddItem error\", result);\n      throw result;\n    }\n  } else if (+data[\"@ns\"] === NS_MYSOURCE || +data[\"@ns\"] === NS_PLACE) {\n    let parms = {};\n    parms.namespace = +data[\"@ns\"];\n    if (+data[\"@ns\"] === NS_MYSOURCE) {\n      parms.namespace = NS_SOURCE;\n      parms.st = data[\"title\"] && data[\"title\"][0][\"#text\"] ? data[\"title\"][0][\"#text\"] : \"\";\n      parms.a = data[\"author\"] && data[\"author\"][0][\"#text\"] ? data[\"author\"][0][\"#text\"] : \"\";\n    } else if (+data[\"@ns\"] === NS_PLACE) {\n      let fields = getPlaceNameLocatedIn(data);\n      parms.pn = fields[0];\n      parms.li = fields[1];\n    }\n    parms.target = \"gedcom\";\n    parms.gedcomtab = component;\n    parms.gedcomkey = data[\"@id\"];\n    loadPageTitle(\"Special:AddPage\", parms);\n    // TODO\n    // tac.showTip(model.gedcomId, data.@ns === NS_MYSOURCE ? TipAlertController.FIND_ADD_SOURCE\n    //   : TipAlertController.FIND_ADD_PLACE);\n  }\n  return true;\n}\n\nasync function mergeItem(model, data) {\n  if (!model.isUpdatable) {\n    return false;\n  }\n  sentData = data;\n  let findAddData = prepareFindAddData(model, data);\n  let result = await sendPageData(findAddData);\n  result = xmlToJson(result);\n  if (result && result[\"@status\"] === \"0\") {\n    let parms = {};\n    parms.gedcom = \"true\";\n    parms.formAction = \"Merge\";\n    parms.ns = NAMESPACES[+data[\"@ns\"]];\n    parms.maxpages = 2;\n    parms.m_0 = getGedcomPageTitle(model, data);\n    parms.m_1 = data[\"@match\"];\n    if (+data[\"@ns\"] === NS_FAMILY) {\n      for (let node of data[\"husband\"] || []) {\n        addMerge(model, node, \"mh_0\", \"mh_1\", parms);\n      }\n      for (let node of data[\"wife\"] || []) {\n        addMerge(model, node, \"mw_0\", \"mw_1\", parms);\n      }\n      let numChildren = 0;\n      for (let node of data[\"child\"] || []) {\n        if (addMerge(model, node, \"mc_0_\" + numChildren, \"mc_1_\" + numChildren, parms)) {\n          parms[\"mcr_0_\" + numChildren] = numChildren + 1;\n          parms[\"mcr_1_\" + numChildren] = numChildren + 1;\n          numChildren++;\n        }\n      }\n      parms.maxchildren = numChildren;\n    }\n    parms.gedcomtab = MATCHES;\n    parms.gedcomkey = data[\"@id\"];\n    loadPageTitle(\"Special:Merge\", parms);\n    // TODO\n    // if (!uc.isVisible()) {\n    //   tac.showTip(model.gedcomId, TipAlertController.MERGE);\n    // }\n  } else {\n    console.log(\"mergeItem error\", result);\n    throw result;\n  }\n  return true;\n}\n\nfunction addMerge(model, ref, lhs, rhs, parms) {\n  let person = model.personMap[ref[\"@id\"]];\n  if (person && person[\"@match\"]) {\n    parms[lhs] = getGedcomPageTitle(model, person);\n    parms[rhs] = person[\"@match\"];\n    return true;\n  }\n  return false;\n}\n\nasync function compareItem(model, data) {\n  if (!model.isUpdatable) {\n    return false;\n  }\n  sentData = data;\n  let compareData = prepareFindAddData(model, data);\n  let result = await sendPageData(compareData);\n  result = xmlToJson(result);\n  if (result && result[\"@status\"] === \"0\") {\n    let parms = {};\n    parms.ns = NAMESPACES[+data[\"@ns\"]];\n    parms.compare = getGedcomPageTitle(model, data) + \"|\" + data[\"@matches\"];\n    parms.gedcomtab = MATCHES;\n    parms.gedcomkey = data[\"@id\"];\n    loadPageTitle(\"Special:Compare\", parms);\n    // TODO\n    // tac.showTip(model.gedcomId, TipAlertController.MATCH);\n  } else {\n    console.log(\"compareItem error\", result);\n    throw result;\n  }\n}\n\nasync function fetchGedcomItem(model, data) {\n  await loadPageData(model, data);\n}\n\nasync function fetchMatchedItem(model, sentData, matchResult) {\n  if (sentData) {\n    if (matchResult === RESULT_MERGE) {\n      // don't do anything\n    } else if (matchResult === RESULT_MATCH) {\n      await fetchItem(model, sentData, MATCHES);\n    } else {\n      // RESULT_NOMATCH\n      await fetchGedcomItem(model, sentData);\n    }\n  }\n}\n\nasync function loadPageData(model, data) {\n  let clone = preparePageData(model, data); // DON\"T set find/add to true; if you do you won\"t be able to edit\n  sentData = data;\n  // send data to WeRelate\n  let result = await sendPageData(clone);\n  result = xmlToJson(result);\n  if (result && result[\"@status\"] === \"0\") {\n    let parms = {};\n    parms.gedcomtab = getDefaultComponent(+data[\"@ns\"]);\n    parms.gedcomkey = data[\"@id\"];\n    parms.gedcomid = model.gedcomId;\n    // only admins can edit pages that aren't mergeable\n    if (model.isUpdatable && (model.isMergeable || model.isAdmin)) {\n      parms.editable = \"true\";\n    }\n    loadPageTitle(\"Special:GedcomPage\", parms);\n  } else {\n    console.log(\"loadPageData error\", result);\n    throw result;\n  }\n}\n\nfunction matchRelatedFamilies(model, person, match, threshold, matchedFamilies, matchedTitles) {\n  // compare parents\n  let families = [];\n  let matchTitles = [];\n  for (let ref of person[\"child_of_family\"] || []) {\n    let family = model.familyMap[ref[\"@id\"]];\n    if (family) families.push(family);\n  }\n  for (let matchingFamily of match[\"child_of_family\"] || []) {\n    matchTitles.push(matchingFamily[\"@title\"]);\n  }\n  compareFamilies(model, matchTitles, families, person, false, threshold, matchedFamilies, matchedTitles);\n\n  // compare spouses\n  families = [];\n  matchTitles = [];\n  for (let ref of person[\"spouse_of_family\"] || []) {\n    let family = model.familyMap[ref[\"@id\"]];\n    if (family) families.push(family);\n  }\n  for (let matchingFamily of match[\"spouse_of_family\"] || []) {\n    matchTitles.push(matchingFamily[\"@title\"]);\n  }\n  compareFamilies(model, matchTitles, families, person, true, threshold, matchedFamilies, matchedTitles);\n}\n\nfunction getMySourceCitationIds(data) {\n  let ids = [];\n  for (let sc of data[\"source_citation\"] || []) {\n    let id = sc[\"@source_id\"];\n    if (!ids.includes(id)) ids.push(id);\n  }\n  return ids;\n}\n\nfunction prepareFindAddData(model, data) {\n  let result = { family: [], person: [] };\n  result[\"@gedcomId\"] = model.gedcomId;\n  let clone = preparePageData(model, data, true);\n  if (+clone[\"@ns\"] === NS_PERSON) {\n    result[\"person\"].push(clone);\n    for (let node of clone[\"child_of_family\"] || []) {\n      addFamily(model, node[\"@id\"], clone[\"@id\"], result);\n    }\n    for (let node of clone[\"spouse_of_family\"] || []) {\n      addFamily(model, node[\"@id\"], clone[\"@id\"], result);\n    }\n  } else if (+clone[\"@ns\"] === NS_FAMILY) {\n    result[\"family\"].push(clone);\n    for (let node of clone[\"husband\"] || []) {\n      let member = model.personMap[node[\"@id\"]];\n      if (member) result[\"person\"].push(preparePageData(model, member, true));\n    }\n    for (let node of clone[\"wife\"] || []) {\n      let member = model.personMap[node[\"@id\"]];\n      if (member) result[\"person\"].push(preparePageData(model, member, true));\n    }\n    for (let node of clone[\"child\"] || []) {\n      let member = model.personMap[node[\"@id\"]];\n      if (member) result[\"person\"].push(preparePageData(model, member, true));\n    }\n  }\n  return result;\n}\n\nfunction addFamily(model, familyId, selfId, result) {\n  let family = model.familyMap[familyId];\n  if (family) {\n    result[\"family\"].push(preparePageData(model, family, true));\n    for (let ref of family[\"husband\"] || []) {\n      let member = model.personMap[ref[\"@id\"]];\n      if (member && member[\"@id\"] !== selfId) result[\"person\"].push(preparePageData(model, member, true));\n    }\n    for (let ref of family[\"wife\"] || []) {\n      let member = model.personMap[ref[\"@id\"]];\n      if (member && member[\"@id\"] !== selfId) result[\"person\"].push(preparePageData(model, member, true));\n    }\n  }\n}\n\nfunction compareFamilies(model, matchTitles, families, data, isSpouse, threshold, matchedFamilies, matchedTitles) {\n  let matched = [];\n  for (let i = 0; i < families.length; i++) {\n    let bestScore = 0;\n    let bestTitle = -1;\n    for (let j = 0; j < matchTitles.length; j++) {\n      if (!matched[j]) {\n        let score = compareFamily(model, matchTitles[j], families[i], data, isSpouse, threshold);\n        if (score > bestScore) {\n          bestScore = score;\n          bestTitle = j;\n        } else if (score > 0 && score === bestScore) {\n          // don't match either if >1 title with same score\n          bestTitle = -1;\n        }\n      }\n    }\n    if (bestTitle >= 0) {\n      matchedFamilies.push(families[i]);\n      matchedTitles.push(matchTitles[bestTitle]);\n      matched[bestTitle] = true;\n    }\n  }\n}\n\nfunction compareFamily(model, matchingTitle, family, data, isSpouse, threshold) {\n  let score = 0;\n  let pattern = /(.*)\\s+and\\s+(.*)\\s+\\(\\d+\\)/i;\n  let result = pattern.exec(matchingTitle);\n  if (result != null) {\n    let matchingHusbandName = result[1];\n    let husband = family[\"husband\"] ? model.personMap[family[\"husband\"][0][\"@id\"]] : null;\n    let husbandName = husband && husband[\"name\"] ? getFullName(husband[\"name\"][0]) : \"\";\n    if (!isSpouse || (data[\"gender\"] && data[\"gender\"][0][\"#text\"] === \"F\")) {\n      score += compareNames(matchingHusbandName, husbandName, threshold);\n    }\n\n    let matchingWifeName = result[2];\n    let wife = family[\"wife\"] ? model.personMap[family[\"wife\"][0][\"@id\"]] : null;\n    let wifeName = wife && wife[\"name\"] ? getFullName(wife[\"name\"][0]) : \"\";\n    if (!isSpouse || (data[\"gender\"] && data[\"gender\"][0][\"#text\"] === \"M\")) {\n      score += compareNames(matchingWifeName, wifeName, threshold);\n    }\n  }\n  return score;\n}\n\nfunction compareNames(name1, name2, threshold) {\n  let score = 0;\n  name1 = name1.trim();\n  name2 = name2.trim();\n  if (name1.length > 0 && name2.length > 0) {\n    let namePieces1 = name1.split(/[ ,\\-']+/);\n    let namePieces2 = name2.split(/[ ,\\-']+/);\n    for (let namePiece1 of namePieces1) {\n      namePiece1 = namePiece1.toLowerCase();\n      for (let namePiece2 of namePieces2) {\n        namePiece2 = namePiece2.toLowerCase();\n        if (namePiece1 === namePiece2) score += 2;\n        else if (similarity(namePiece1, namePiece2) >= threshold) score += 1;\n      }\n    }\n  }\n  return score;\n}\n\nfunction getPositiveNegative(tf) {\n  if (tf === \"true\") {\n    return \"1\";\n  } else if (tf === \"false\") {\n    return \"-1\";\n  }\n  return \"0\";\n}\n\nfunction fetchWeRelateItem(data) {\n  let ns = +data[\"@ns\"];\n  if (ns === NS_MYSOURCE) ns = NS_SOURCE;\n  loadPageTitle(NAMESPACES[ns] + \":\" + data[\"@match\"]);\n}\n","import axios from \"axios\";\nimport axiosRetry from \"axios-retry\";\n\nconst axiosClient = axios.create({\n  baseURL: process.env.VUE_APP_API_BASE_URL,\n  withCredentials: false, // This is the default\n  headers: {\n    Accept: \"text/xml\",\n    \"Content-Type\": \"multipart/form-data\"\n  }\n});\naxiosRetry(axiosClient, { retries: 3 }); // retry non-POST requests on network or 5XX errors\n\nexport function sendAjaxService(functionName, params, method = \"GET\") {\n  let sendParams = { action: \"ajax\", rs: functionName };\n  let rsargs = \"\";\n  let data = null;\n  if (typeof params === \"string\") {\n    rsargs = params;\n  } else if (params) {\n    for (let key of Object.keys(params)) {\n      if (rsargs.length > 0) rsargs += \"|\";\n      rsargs += key + \"=\" + params[key];\n    }\n  }\n  if (rsargs.length > 0) {\n    sendParams[\"rsargs\"] = rsargs;\n  }\n  if (method === \"POST\") {\n    data = new FormData();\n    for (let key of Object.keys(sendParams)) {\n      data.append(key, sendParams[key]);\n    }\n    sendParams = null;\n  }\n  return axiosClient.request({\n    method: method,\n    url: getBaseURL(),\n    params: sendParams,\n    data: data\n  });\n}\n\nfunction getBaseURL() {\n  return \"/w/index.php\";\n}\n","import { sendAjaxService } from \"./ServerHelper\";\nimport { parseXML, toXMLString } from \"@/utils/XMLUtils\";\n\nexport const WR_SERVER = \"https://www.werelate.org\";\n\nexport function readGedcom(gedcomId) {\n  return sendAjaxService(\"wfReadGedcom\", { gedcom_id: gedcomId }).then(res => parseXML(res.data));\n}\n\nexport function readGedcomData(gedcomId) {\n  return sendAjaxService(\"wfReadGedcomData\", { gedcom_id: gedcomId }).then(res => parseXML(res.data));\n}\n\n// export function updatePrimaryPage(gedcomId, primaryId) {\n//   return sendAjaxService(\"wfUpdateGedcomPrimary\", { gedcom_id: gedcomId, primary: primaryId }).then(res =>\n//     parseXML(res.data)\n//   );\n// }\n\nexport function sendPageData(data) {\n  let xml = toXMLString(data);\n  return sendAjaxService(\"wfSetGedcomPage\", xml, \"POST\").then(res => parseXML(res.data));\n}\n\nexport function readGedcomPageData(gedcomId, key) {\n  return sendAjaxService(\"wfReadGedcomPageData\", { gedcom_id: gedcomId, key: key }).then(res => parseXML(res.data));\n}\n\nexport function updateGedcomFlag(gedcomId, attr, value, keys) {\n  let key;\n  let method;\n  if (Array.isArray(keys)) {\n    key = keys.join(\"/\");\n    method = \"POST\";\n  } else {\n    key = keys.toString();\n    method = \"GET\";\n  }\n  return sendAjaxService(\n    \"wfUpdateGedcomFlag\",\n    { gedcom_id: gedcomId, attr: attr, value: value, key: key },\n    method\n  ).then(res => parseXML(res.data));\n}\n\nexport function saveMatchedFamily(data) {\n  let xml = toXMLString(data);\n  return sendAjaxService(\"wfMatchFamily\", xml, \"POST\").then(res => parseXML(res.data));\n}\n\nexport function saveMatchesToServer(gedcomId, prefixedTitles, merged, keys) {\n  return sendAjaxService(\n    \"wfUpdateGedcomMatches\",\n    { gedcom_id: gedcomId, match: prefixedTitles.join(\"/\"), key: keys.join(\"/\"), merged: merged.join(\"/\") },\n    \"POST\"\n  ).then(res => parseXML(res.data));\n}\n\n// potential matches are unprefixed titles\nexport function savePotentialMatches(gedcomId, potentialMatches, keys) {\n  return sendAjaxService(\n    \"wfUpdateGedcomPotentialMatches\",\n    { gedcom_id: gedcomId, matches: potentialMatches.join(\"/\"), key: keys.join(\"/\") },\n    \"POST\"\n  ).then(res => parseXML(res.data));\n}\n\nexport function updateGedcomStatus(gedcomId, status, warning) {\n  return sendAjaxService(\"wfUpdateGedcomStatus\", {\n    gedcom_id: gedcomId,\n    gedcomStatus: status,\n    warning: warning\n  }).then(res => parseXML(res.data));\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"ef13\";"],"sourceRoot":""}